I"k<h2 id="56-primeros-pasos-con-laravel-hola-mundo">5.6. Primeros pasos con Laravel: Hola mundo</h2>

<p>En esta secci√≥n vamos a crear nuestra primera aplicaci√≥n funcional con Laravel: el tradicional ‚ÄúHola mundo‚Äù. Nos servir√° para aprender la din√°mica de trabajo con Laravel y para construir un esqueleto de aplicaci√≥n sobre la que montar algo m√°s grande m√°s adelante.</p>

<p><strong>Crea una clave segura</strong></p>

<p>Ejecuta el comando:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">php</span> <span class="n">artisan</span> <span class="n">key</span><span class="o">:</span><span class="n">generate</span>
</code></pre></div></div>

<p>Esto genera una clave aleatoria y la almacena en el archivo de configuraci√≥n /.env</p>

<p>Es necesaria para hacer conexiones seguras con la aplicaci√≥n.</p>

<p>En versiones recientes de Laravel es obligatorio crearla.</p>

<p><strong>Probando el enrutador</strong></p>

<p>Vamos a empezar probando algo sencillo: capturar una ruta. Edita el archivo /routes/web.php y a√±ade esto:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/hola'</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">return</span> <span class="s2">"Hola, mundo"</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div></div>

<p>Esto significa que, cuando escribas la ruta ‚Äúhola‚Äù en la barra de direcciones del navegador, se ejecutar√° esta funci√≥n an√≥nima (tambi√©n denominadas <strong><em>closures</em></strong>) y, como resultado, se ver√° el texto ‚ÄúHola, mundo‚Äù en la ventana del navegador.</p>

<p>Pru√©balo en el navegador la direcci√≥n: http://<mi-ruta>/index.php/hola</mi-ruta></p>

<p><strong>Enrutar al controlador</strong></p>

<p>Ahora vamos a hacer que la misma ruta de antes provoque la ejecuci√≥n de una funci√≥n en un controlador.</p>

<p>Edita el enrutador /routes/web.php, sustituye la ruta anterior por esto:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/hola'</span><span class="p">,</span> <span class="s1">'HolaController@index'</span><span class="p">);</span>
</code></pre></div></div>

<p>Esto indica al enrutador que, al recibir la ruta ‚Äúhola‚Äù, se debe ejecutar el m√©todo index() del controlador HolaController.</p>

<p>Ahora tienes que crear ese controlador:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">$</span> <span class="n">php</span> <span class="n">artisan</span> <span class="n">make</span><span class="o">:</span><span class="n">controller</span> <span class="nc">HolaController</span>
</code></pre></div></div>

<p>Por √∫ltimo edita el controlador /app/Http/Controllers/HolaController.php:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">index</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">return</span> <span class="s2">"Hola, mundo"</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Comprueba que funciona en el navegador: http://<mi-ruta>/index.php/hola</mi-ruta></p>

<p>(NOTA IMPORTANTE: desde Laravel 8, para que esto funcione es necesario descomentar la siguiente l√≠nea del archivo /app/Providers/RouteServiceProvider.php:
 // protected $namespace = ‚ÄòApp\Http\Controllers‚Äô; )</p>

<p><strong>Cargar una vista en el controlador</strong></p>

<p>Vamos a variar el c√≥digo anterior para que el m√©todo del controlador no produzca la salida HTML directamente, sino que invoque a una vista que genere el HTML. Adem√°s, vamos a inyectar en la URL una variable con el nombre del usuario para mostrar c√≥mo se capturan esos valores y c√≥mo se pasan a las vistas.</p>

<p>Comenzamos modificando el enrutador /routes/web.php (observa c√≥mo se indica la presencia de una variable en la URL):</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Route</span><span class="o">::</span><span class="nf">get</span><span class="p">(</span><span class="s1">'/hola/{nombre}'</span><span class="p">,</span> <span class="s1">'HolaController@show'</span><span class="p">);</span>
</code></pre></div></div>

<p>Ahora creamos un m√©todo show() en el controlador /app/Http/Controllers/HolaController.php</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">show</span><span class="p">(</span><span class="nv">$nombre</span><span class="p">)</span> <span class="p">{</span>
   <span class="nv">$data</span><span class="p">[</span><span class="s1">'nombre'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$nombre</span><span class="p">;</span>
   <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'hola'</span><span class="p">,</span> <span class="nv">$data</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Como ves, estamos invocando una vista llamada ‚Äúhola‚Äù y le estamos pasando un array con los datos necesarios (el nombre del usuario, en este caso). Esa vista debe crearse en /resources/views/hola.blade.php y puede tener este aspecto:</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;body&gt;</span>
   Saludos, {{$nombre}}.
   ¬øLe apetece una partidita de ajedrez?
<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<p>Puedes probar esta nueva ruta cargando en el navegador la ruta http://<mi-ruta>/index.php/hola/ProfesorFalken.</mi-ruta></p>

<p>La respuesta deber√≠a ser esta:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Saludos, ProfesorFalken. ¬øLe apetece una partidita de ajedrez?
</code></pre></div></div>

<p>Recuerda que, desde Laravel 8, el funcionamiento del enrutador ha cambiado. Para conservar compatibilidad hacia atr√°s, hay que abrir el archivo /app/Providers/RouteServiceProvider.php y descomentar esta l√≠nea:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// protected $namespace = 'App\Http\Controllers';</span>
</code></pre></div></div>

<p>Hay otras soluciones que <a href="https://litvinjuan.medium.com/how-to-fix-target-class-does-not-exist-in-laravel-8-f9e28b79f8b4">se describen aqu√≠</a>.</p>

:ET