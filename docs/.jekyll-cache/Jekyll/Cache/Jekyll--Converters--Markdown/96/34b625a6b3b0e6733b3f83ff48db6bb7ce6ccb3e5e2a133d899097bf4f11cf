I"ñ<h2 id="54-arquitectura-convenciones-y-configuraci√≥n-de-laravel">5.4. Arquitectura, convenciones y configuraci√≥n de Laravel</h2>

<h3 id="541-estructura-de-directorios">5.4.1. Estructura de directorios</h3>

<p>Despu√©s de una instalaci√≥n limpia de Laravel, nos encotraremos con una estructura t√≠pica de directorios. Los m√°s importantes (al menos, para empezar) son estos:</p>

<p><strong>composer.json</strong>: informaci√≥n para composer.</p>

<p><strong>/app</strong>: el c√≥digo de nuestra aplicaci√≥n. Modelos.</p>

<p><strong>/app/config</strong>: configuraci√≥n de la aplicaci√≥n.</p>

<p><strong>/app/http</strong>: peticiones HTTP, incluyendo los controladores.</p>

<p><strong>/database</strong>: migraciones de la BD.</p>

<p><strong>/plugins</strong>: pues eso.</p>

<p><strong>/public</strong>: directorio de acceso p√∫blico. Aqu√≠ se pueden colocar im√°genes, scripts o archivos css.</p>

<p><strong>/resources</strong>: assets (im√°genes, css, js), archivos de idioma y vistas.</p>

<p><strong>/storage</strong>: cach√©, sesiones, vistas compiladas‚Ä¶</p>

<p><strong>/vendors</strong>: librer√≠as de terceros.</p>

<h3 id="542-convenciones-en-laravel">5.4.2. Convenciones en Laravel</h3>

<p>Laravel tiene un mont√≥n de convenciones que persiguen hacer m√°s sencilla la configuraci√≥n de la aplicaci√≥n. Aunque la mayor√≠a no son obligatorias, es recomendable respetarlas para evitar errores de configuraci√≥n y conflictos con los identificadores.</p>

<ul>
  <li>
    <p><strong>Modelos</strong>: Nombres igual que el de la tabla, en singular, en CamelCase y con may√∫scula. Ejemplo: RegisteredUser</p>
  </li>
  <li>
    <p><strong>Controladores</strong>: como el modelo, pero a√±adiendo la palabra ‚Äúcontroller‚Äù o ‚Äúcontrolador‚Äù. Ejempo: RegisteredUserController</p>
  </li>
  <li>
    <p><strong>M√©todos</strong>: en camelCase empezando con min√∫scula. Ejemplo: User::getAll()</p>
  </li>
  <li>
    <p><strong>Atributos</strong>: en snake_case empezando con min√∫scula. Ejemplo: User::first_name</p>
  </li>
  <li>
    <p><strong>Variables</strong>: en camelCase empezando con min√∫scula. Ejemplos: bannedUsers (colecci√≥n, en plural), articleContent (variable simple, en singular)</p>
  </li>
  <li>
    <p><strong>Tablas</strong>: en plural y en snake_case. Ej: registered_users.</p>
  </li>
  <li>
    <p><strong>Columnas</strong>: en snake_case, sin referencia al nombre de la tabla. Ejemplo: first_name</p>

    <ul>
      <li>
        <p><strong>Clave primaria</strong>: id (integer y auto-increment).</p>
      </li>
      <li>
        <p><strong>Claves ajenas</strong>: nombre tabla ajena en singlular + id. Ejemplo: article_id</p>
      </li>
      <li>
        <p><strong>Timestamps</strong>: created_at y updated_at</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Tablas pivote</strong>: en snake_case, en plural y orden alfab√©tico. Ejemplo: articles_users ser√° el pivote entre articles y users.</p>
  </li>
</ul>

<h3 id="543-variables-de-entorno-el-archivo-env">5.4.3. Variables de entorno. El archivo .env</h3>

<p>Este archivo contiene todas las variables de entorno que configuran la aplicaci√≥n, como:</p>

<ul>
  <li>
    <p>APP_ENV: ¬øestamos en desarrollo o en producci√≥n?</p>
  </li>
  <li>
    <p>APP_DEBUG: ¬ømostrar errores para depuraci√≥n?</p>
  </li>
  <li>
    <p>APP_URL: URL base de la aplicaci√≥n</p>
  </li>
  <li>
    <p>DB_CONNECTION, DB_HOST, DB_USERNAME, etc.</p>
  </li>
</ul>

<p>El archivo example.env contiene una plantilla para que puedas construir tu archivo .env. Simplemente, renombra el archivo example.env y asigna los valores correctos a las variables de entorno.</p>

<p>El archivo .env NO debe sincronizarse con git (o con el control de versiones que usemos) porque contiene informaci√≥n sensible.</p>

<p>En los archivos de configuraci√≥n haremos referencia a las variables de entorno. Por ejemplo: en /config/database.php usaremos una expresi√≥n as√≠:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>'default' =&gt; env('DB_CONNECTION', 'mysql')
</code></pre></div></div>

<p>El primer par√°metro de env() es la variable de entorno y el segundo es el valor por defecto en caso de que la variable no exista.</p>

<h3 id="544-archivos-de-configuraci√≥n-del-directorio-config">5.4.4. Archivos de configuraci√≥n del directorio /config</h3>

<p>En este directorio encontraremos multitud de archivos que configuran el funcionamiento de Laravel.</p>

<p>En principio, no es necesario modificar ninguno, porque las configuraciones b√°sicas se manejan desde el archivo .env. Sin embargo, hay veces que s√≠ necesitaremos acceder a estos archivos y tocar alguna configuraci√≥n.</p>

<p>Los archivos de configuraci√≥n m√°s importantes que puedes encontrar aqu√≠ son:</p>

<p><strong>database.php</strong>: configuraci√≥n de la conexi√≥n a la base de datos. Toma sus valores principales de .env, pero desde aqu√≠ podemos cambiar otras cosas, como el controlador (por defecto es MySQL, pero podemos cambiarlo a PostgreSQL, SQLite, etc)
<strong>app.php</strong>: nombre de la aplicaci√≥n, estado (desarrollo, producci√≥n‚Ä¶)
<strong>session.php</strong>: forma en la que se almacenar√°n las sesiones (por defecto, en fichero)</p>

:ET