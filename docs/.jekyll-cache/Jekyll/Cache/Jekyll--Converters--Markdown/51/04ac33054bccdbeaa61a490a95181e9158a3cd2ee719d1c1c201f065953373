I" <h2 id="81-common-gateway-interface-cgi">8.1. Common Gateway Interface (CGI)</h2>

<p>CGI es la soluci√≥n m√°s antigua para el desarrollo web en el lado del servidor.</p>

<p>En la d√©cada de 1990, cuando se empez√≥ a pensar en la posibilidad de crear p√°gina din√°micas generadas por el servidor a partir de los recursos del mismo (t√≠picamente, una base de datos), los primeros intentos utilizaron las tecnolog√≠as presentes en ese momento en los servidores web.</p>

<p>Todos los servidores ten√≠an un compilador de C/C++, as√≠ que alguien pens√≥: ¬øpor qu√© no escribimos las aplicaciones web en C/C++, las compilamos y hacemos que el ejecutable se pueda invocar v√≠a web?</p>

<p>Para lograr esto √∫ltimo, se utiliz√≥ CGI (Common Gateway Interface).</p>

<p>CGI es una interfaz entre los servidores web y las aplicaciones que se ejecutan en el servidor. Estas aplicaciones pueden estar construidas en cualquier lenguaje (no solo C/C++). A CGI, eso le da igual. Solo define la forma de transferir informaci√≥n en ambos sentidos.</p>

<p>La figura siguiente muestra la forma en la que se ejecutan programas en el servidor a trav√©s de CGI. Si lo observas con atenci√≥n, ver√°s que no difiere demasiado de la forma en la que trabaja PHP, porque cualquier petici√≥n tiene 4 pasos:</p>
<ol>
  <li>Se recibe la petici√≥n de un cliente web.</li>
  <li>El servidor web recibe la peticion y, a trav√©s del interfaz CGI, le pide al sistema operativo que ejecute el programa correspondiente.</li>
  <li>La salida del programa se redirige al servidor web. De esto se encarga, nuevamente, el interfaz CGI.</li>
  <li>El servidor devuelve al cliente el resultado de la ejecuci√≥n del programa.</li>
</ol>

<p>XXX esquema</p>

<h3 id="811-entonces-en-qu√©-se-diferencia-cgi-de-php">8.1.1. Entonces, ¬øen qu√© se diferencia CGI de PHP?</h3>

<p>Lo primero, CGI no es un lenguaje de programaci√≥n. Eso ya lo hemos dicho. Es un <strong><em>interfaz</em></strong> entre el servidor web y el sistema operativo para poder ejecutar cualquier programa escrito en cualquier lenguaje a trav√©s de la web.</p>

<p>Puede parecer una soluci√≥n perfecta, ¬øverdad? Pero, si fuera as√≠, ¬øpor qu√© no se sigue usando de forma masiva? ¬øPor qu√© se abandon√≥ en favor de PHP u otros de los lenguajes que vamos a ver m√°s adelante?</p>

<p>La respuesta breve es: CGI tiene un serio problema de rendimiento.</p>

<p>Cada vez que se recibe una petici√≥n de un cliente, se crea un nuevo proceso en el servidor para ejecutar el programa en cuesti√≥n. Este proceso necesita un espacio de memoria para colocar su c√≥digo fuente y sus datos, y esto recursos solo se liberan cuando el servidor termina de responder al cliente. Esta creaci√≥n de procesos independientes implica una carga importante para el servidor, por lo cual esta modalidad de generaci√≥n de contenido din√°mico no es muy escalable.</p>

<p>Por su parte, PHP (y otras soluciones que veremos m√°s adelante) no crean un proceso independiente para cada petici√≥n recibida, sino que un mismo macro-proceso se encarga de gestionarlas todas. En t√©rminos de escalabilidad, esta opci√≥n es mucho mejor. As√≠ que, cuando los servidores empezaron a recibir muchas visitas simult√°neas, CGI comenz√≥ a abandonarse. Sencillamente, ning√∫n servidor pod√≠a soportar grandes vol√∫menes de peticiones.</p>

<p>Existen algunas alternativas para solucionar este problema de CGI, como mantener un s√≥lo proceso CGI en memoria que se encargue de procesar todas las peticiones (t√©cnica conocida como FastCGI y que, de hecho, se sigue utilizando en la actualidad, incluso para ejecutar PHP en el servidor), pero resulta m√°s complejo de configurar y operar, e implica algunos problemas de seguridad. En cualquier caso, estos detalles de configuraci√≥n del servidor son cosas que competen m√°s a los administradores de sistemas que a los desarrolladores.</p>
:ET