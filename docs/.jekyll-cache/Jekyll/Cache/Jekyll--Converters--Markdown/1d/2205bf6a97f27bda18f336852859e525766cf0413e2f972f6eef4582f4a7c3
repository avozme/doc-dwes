I"≠#<h2 id="53-instalaci√≥n-de-laravel">5.3. Instalaci√≥n de Laravel</h2>

<h3 id="531-instalaci√≥n-en-servidor-local">5.3.1. Instalaci√≥n en servidor local</h3>

<p>No es recomendable instalar Laravel de forma nativa en tu servidor local porque requiere una fuerte configuraci√≥n del servidor. Tendr√°s que instalar bastante librer√≠as que consumir√°n recursos de tu m√°quina sin necesidad, tales como OpenSSL, Mbstring o Tokenizer.</p>

<p>Tambi√©n necesitas instalar composer, la herramienta de resoluci√≥n de dependencias de PHP.</p>

<p>Por todo ello, es recomendable optar por la virtualizaci√≥n del servidor mediante Vagrant (Homestead) o Docker. Discutiremos estas dos opciones m√°s adelante.</p>

<p>Si, a√∫n as√≠, est√°s decidido a instalar Laravel de forma nativa en tu servidor local, sigue estos pasos:</p>

<p><strong>Paso 1</strong>. Descarga Laravel.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ composer global require "laravel/installer"
</code></pre></div></div>

<p><strong>Paso 2</strong>. Instala copia de Laravel limpia y lista para usar (hacerlo en un directorio accesible por Apache). Puede requerir a√±adir el comando laravel al PATH del sistema.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ laravel new &lt;nombre-aplicaci√≥n&gt;
</code></pre></div></div>

<p>Por ejemplo:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ laravel new blog
</code></pre></div></div>

<p>No olvides dar los permisos necesarios a tus archivos y directorios.</p>

<p>Los problemas que pueden surgir son m√∫ltiples e insospechados, dependiendo de la configuraci√≥n de tu servidor. Puedes intentar seguir alguna de estas gu√≠as:</p>

<ul>
  <li>
    <p><a href="https://www.howtoforge.com/tutorial/install-laravel-on-ubuntu-for-apache/">Gu√≠a para instalar Laravel en localhost en Ubuntu Linux</a></p>
  </li>
  <li>
    <p><a href="https://weeklyhow.com/installing-laravel-8-with-xampp/">Gu√≠a para instalar Laravel en localhost con Windows y XAMPP:</a></p>
  </li>
</ul>

<h3 id="532-instalaci√≥n-de-laravel-con-m√°quina-virtual-vagrant-homestead">5.3.2. Instalaci√≥n de Laravel con m√°quina virtual Vagrant (Homestead)</h3>

<p>Vagrant es una herramienta para crear un entorno de desarrollo virtual sin necesidad de instalar componentes en nuestra m√°quina.</p>

<p>Cada entorno de desarrollo se llama Box y hay cientos de ellos.</p>

<p><strong>Homestead</strong> es un Box de Vagrant con todo lo necesario para desarrollar con Laravel sin necesidad de configurar nuestro servidor local. Este Box, creado por los propios desarrolladores de Laravel, puede configurarse para equipararlo al servidor donde se vaya a desplegar la aplicaci√≥n en el futuro.</p>

<p>La instalaci√≥n de Laravel en Homestead es la forma recomendada para desarrollar proyectos Laravel en un entorno local. La puesta en producci√≥n es otra historia, y depender√° de las posibilidades de configuraci√≥n del servidor.</p>

<p>Instalar Laravel con Homestead en tu entorno local puede parecer un proceso largo y complejo, pero no suele dar problemas y la fiabilidad de est√° soluci√≥n est√° garantizada, por lo que es la manera m√°s recomendable. Si deseas instalarlo, sigue estos pasos:</p>

<p><strong>Paso 1</strong>. Instala la √∫ltima versi√≥n disponible de Virtual Box.</p>

<p><strong>Paso 2</strong>. Instala Vagrant y git</p>

<p><strong>Paso 3</strong>. Agrega a Vagrant el box de Homestead:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vagrant box add laravel/homestead
</code></pre></div></div>

<p><strong>Paso 4</strong>. Consigue el √∫ltimo c√≥digo fuente de Laravel:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git clone https://github.com/laravel/homestead.git ~/Homestead
</code></pre></div></div>

<p><strong>Paso 5</strong>. Selecciona la rama ‚Äúrelease‚Äù del repositorio de Laravel y lanza el script de inicializaci√≥n:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd Homestead
$ git checkout release
$ bash init.sh (o init.bat en Windows)
</code></pre></div></div>

<p><strong>Paso 6</strong>. Edita el archivo Homestead.yaml para configurar tu m√°quina virtual.</p>

<p><strong>Paso 7</strong>. Edita el archivo hosts (/etc/hosts o C:\Windows\System32\drivers\etc\hosts) para a√±adir esta l√≠nea:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>192.168.10.10 homestead.test
</code></pre></div></div>

<p>(C√°mbiala por la IP que hayas configurado en el archivo .yaml)</p>

<p><strong>Paso 8</strong>. Levanta la m√°quina virtual Homestead:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vagrant up
</code></pre></div></div>

<p>(Este comando hay que ejecutarlo desde el directorio Homestead)</p>

<p>La primera vez puede tardar un rato mientras crea y configura la VM.</p>

<p><strong>Paso 9</strong>. Prueba en el navegador la direcci√≥n: http://homestead.test. El servidor deber√≠a responder.</p>

<p><strong>Paso 10</strong>. Prueba a acceder a la VM mediante ssh con el comando:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ vagrant ssh
</code></pre></div></div>

<p><strong>Paso 11</strong>. En la m√°quina real, crea el directorio ~/code (o el que est√© configurado en el archivo Homestead.yaml).</p>

<p><strong>Paso 12</strong>. En la m√°quina virtual, ve al mismo directorio ~/code (o el que est√© configurado en Homestead.yaml) y actualiza las librer√≠as PHP con composer:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ composer create-project laravel/laravel code --prefer-dist
$ composer install
</code></pre></div></div>

<p>¬°Y listo! T√∫ trabajar√°s en tu directorio local ~/code y cualquier cambio que hagas se mapear√° autom√°ticamente al directorio ~/code en la VM. Mant√©n una consola abierta en la VM para ejecutar comandos artisan.</p>

<p>Ten en cuenta que MySQL estar√° escuchando en 127.0.0.1:33060 (user ‚ÄúHomestead‚Äù, password ‚Äúsecret‚Äù, salvo que hayas cambiado la configuraci√≥n) (¬°Ojo! Esto es para conexiones desde fuera de Homestead. Desde el punto de vista de la app, MySQL seguir√° estando en localhost:3306)</p>

<p>Es posible que necesites generar una clave SSH para conexiones seguras con tu servidor virtual.</p>

<ul>
  <li>
    <p><a href="https://ekiketa.es/fallo-en-homestead-check-your-homestead-yaml-file-the-path-to-your-private-key-does-not-exist/">C√≥mo hacerlo en Linux</a></p>
  </li>
  <li>
    <p><a href="https://medium.com/@eaimanshoshi/i-am-going-to-write-down-step-by-step-procedure-to-setup-homestead-for-laravel-5-2-17491a423aa">C√≥mo hacerlo en Windows 10</a></p>
  </li>
</ul>

<p>M√°s info en <a href="https://laravel.com/docs/8.X/homestead">https://laravel.com/docs/8.X/homestead</a></p>

<h3 id="533-laravel-con-docker">5.3.3. Laravel con Docker</h3>

<p>Docker es una soluci√≥n de virtualizaci√≥n a√∫n m√°s ligera que Vagrant. Con Docker, se virtualizan solo los componentes software que nuestra aplicaci√≥n necesita para funcionar, y se ejecutan directamente en la m√°quina anfitri√≥n.</p>

<p>Los componentes se llaman <strong><em>images</em></strong>. Cuando se instancian, pasan de denominarse <strong><em>containers</em></strong>.</p>

<p>Hay docker images para todo lo imaginable. Puedes encontrarlas en <a href="https://hub.docker.com">https://hub.docker.com</a>. Aunque Laravel recomienda la virtualizaci√≥n mediante Vagrant, muchos desarrolladores optan por Docker por su mayor simplicidad y eficiencia.</p>

<p>Para instalar Laravel mediante Docker para un desarrollo local, sigue estos pasos:</p>

<p><strong>Paso 1</strong>. Instala docker (y, optativamente, docker-compose) en tu servidor.</p>

<p><strong>Paso 2</strong>. Busca una imagen de Laravel en https://hub.docker.com. Por ejemplo, Bitnami (una empresa propiedad de VMWare) tiene im√°genes bastante fiables.</p>

<p><strong>Paso 3</strong>. Crea un directorio para tu aplicaci√≥n web. No importa en qu√© parte del √°rbol de directorios local est√©s.</p>

<p><strong>Paso 4</strong>. En la consola, teclea el comando para crear una copia local de las im√°genes necesarias. En el caso de la imagen Laravel de Bitnami, el comando es:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ docker pull bitnami/laravel
</code></pre></div></div>

<p><strong>Paso 5</strong>. Sigue las instrucciones para el despliegue del contenedor que el desarrollador ha debido colgar en hub.docker.com. En el caso de bitnami, hay que copiar un archivo remoto mediante el comando curl y levantar las im√°genes docker con docker-compose.</p>

<p>¬°Y listo! Nuestro Laravel estar√° funcionando con todas sus dependencias resueltas.</p>
:ET