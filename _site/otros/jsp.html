<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>8.5 JSP - DAW DOCS</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>8.5 JSP | DAW DOCS</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="8.5 JSP" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="/otros/jsp" /> <meta property="og:url" content="/otros/jsp" /> <meta property="og:site_name" content="DAW DOCS" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="8.5 JSP" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/otros/jsp","headline":"8.5 JSP","description":"Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> DAW DOCS </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/" class="nav-list-link">Desarrollo Web en Entorno Servidor</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/cms/" class="nav-list-link">1 Sistemas gestores de contenido (CMS)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/cms/algunas-cosas-que-debes-saber" class="nav-list-link">1.1 Algunas cosas que debes saber sobre los CMS</a> </li><li class="nav-list-item "> <a href="/cms/wordpress" class="nav-list-link">1.2 Wordpress</a> </li><li class="nav-list-item "> <a href="/cms/moodle" class="nav-list-link">1.3 Moodle</a> </li><li class="nav-list-item "> <a href="/cms/prestashop" class="nav-list-link">1.4 Prestashop</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/php/" class="nav-list-link">2 Introducción a PHP</a><ul class="nav-list"><li class="nav-list-item "> <a href="/php/programacion-cliente-servidor" class="nav-list-link">2.1 Programación cliente-servidor</a> </li><li class="nav-list-item "> <a href="/php/caja-de-herramientas" class="nav-list-link">2.2 Caja de herramientas</a> </li><li class="nav-list-item "> <a href="/php/sintaxis-de-php" class="nav-list-link">2.3 Sintaxis de PHP</a> </li><li class="nav-list-item "> <a href="/php/interaccion-con-php" class="nav-list-link">2.4 Interacción con la base de datos</a> </li><li class="nav-list-item "> <a href="/php/ejercicios-resueltos" class="nav-list-link">2.5 Ejercicios resueltos</a> </li><li class="nav-list-item "> <a href="/php/ejercicios-propuestos" class="nav-list-link">2.6 Ejercicios propuestos</a> </li></ul></li><li class="nav-list-item "><a href="/cookies-sesiones-seguridad/" class="nav-list-link">3 Cookies, sesiones y seguridad</a></li><li class="nav-list-item "><a href="/mvc/" class="nav-list-link">4 Arquitectura MVC</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/laravel/" class="nav-list-link">5 Laravel</a><ul class="nav-list"><li class="nav-list-item "> <a href="/laravel/1" class="nav-list-link">5.1 Frameworks PHP MVC</a> </li><li class="nav-list-item "> <a href="/laravel/2" class="nav-list-link">5.2 Características de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/3" class="nav-list-link">5.3 Instalación de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/4" class="nav-list-link">5.4 Arquitectura, convenciones y configuración de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/5" class="nav-list-link">5.5 Artisan</a> </li><li class="nav-list-item "> <a href="/laravel/6" class="nav-list-link">5.6 Primeros pasos con Laravel. Hola mundo</a> </li><li class="nav-list-item "> <a href="/laravel/7" class="nav-list-link">5.7 Enrutamiento</a> </li><li class="nav-list-item "> <a href="/laravel/8" class="nav-list-link">5.8 Vistas y plantillas. Blade</a> </li><li class="nav-list-item "> <a href="/laravel/9" class="nav-list-link">5.9 Controladores</a> </li><li class="nav-list-item "> <a href="/laravel/10" class="nav-list-link">5.10 Migraciones</a> </li><li class="nav-list-item "> <a href="/laravel/11" class="nav-list-link">5.11 Usando la BD con Eloquent</a> </li><li class="nav-list-item "> <a href="/laravel/12" class="nav-list-link">5.12 Usando la BD con QueryBuilder</a> </li><li class="nav-list-item "> <a href="/laravel/13" class="nav-list-link">5.13 Sesiones con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/14" class="nav-list-link">5.14 Helpers de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/15" class="nav-list-link">5.15 Flujo de trabajo típico con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/16" class="nav-list-link">5.16 Laravel y Vue.js</a> </li><li class="nav-list-item "> <a href="/laravel/17" class="nav-list-link">5.17 Aspectos avanzados de Laravel</a> </li></ul></li><li class="nav-list-item "><a href="/servicios-web/" class="nav-list-link">6 Servicios web</a></li><li class="nav-list-item "><a href="/ajax/" class="nav-list-link">7 Ajax</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/otras-tecnologias/" class="nav-list-link">8 Otras tecnologías</a><ul class="nav-list"><li class="nav-list-item "> <a href="/otros/cgi" class="nav-list-link">8.1 CGI</a> </li><li class="nav-list-item "> <a href="/otros/perl" class="nav-list-link">8.2 Perl</a> </li><li class="nav-list-item "> <a href="/otros/python" class="nav-list-link">8.3 Python</a> </li><li class="nav-list-item "> <a href="/otros/.net" class="nav-list-link">8.4 .NET</a> </li><li class="nav-list-item active"> <a href="/otros/jsp" class="nav-list-link active">8.5 JSP</a> </li><li class="nav-list-item "> <a href="/otros/ruby" class="nav-list-link">8.6 Ruby</a> </li><li class="nav-list-item "> <a href="/otros/nodejs" class="nav-list-link">8.7 NodeJS</a> </li><li class="nav-list-item "> <a href="/otros/mas-tecnologias-aun" class="nav-list-link">8.8 Más tecnologías aún</a> </li></ul></li><li class="nav-list-item "><a href="/scv-git/" class="nav-list-link">Apéndice I. Sistemas de control de versiones. Git</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DAW DOCS" aria-label="Search DAW DOCS" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Desarrollo Web en Entorno Servidor</a></li> <li class="breadcrumb-nav-list-item"><a href="/otras-tecnologias/">8 Otras tecnologías</a></li> <li class="breadcrumb-nav-list-item"><span>8.5 JSP</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="85-jsp"> <a href="#85-jsp" class="anchor-heading" aria-labelledby="85-jsp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5. JSP </h2> <h3 id="851-características-del-lenguaje-jsp"> <a href="#851-características-del-lenguaje-jsp" class="anchor-heading" aria-labelledby="851-características-del-lenguaje-jsp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5.1. Características del lenguaje JSP </h3> <p>Fecha de aparición: 1995</p> <p>Perspectivas:</p> <ul> <li>Usado para proyectos grandes y complejos, donde PHP (y otros lenguajes de scripting) se quedan pequeños. O eso aseguran los chicos de Oracle, claro.</li> <li>El lenguaje de programación es Java, es decir, lo conoce cualquier programador.</li> <li>Velocidad de ejecución superior a la de otros lenguajes semi-interpretados.</li> </ul> <p>Filosofía:</p> <ul> <li>Adaptación natural de Java al lado del servidor.</li> <li>Orientado a objetos. Multiplataforma. Fuertemente tipado.</li> <li>Puede embeberse dentro de HTML, como PHP.</li> <li>El código Java se precompila en un Servlet y se deja cargado en la memoria del servidor. Las peticiones subsiguientes se ejecutan así de forma más rápida. Este enfoque está siendo adoptado por otras tecnologías del lado del servidor, como NodeJS o algunos frameworks basados en otros lenguajes, que <em>precompilan</em> las vistas para servirlas mucho más deprisa.</li> </ul> <h3 id="852-configuración-necesaria-en-el-servidor"> <a href="#852-configuración-necesaria-en-el-servidor" class="anchor-heading" aria-labelledby="852-configuración-necesaria-en-el-servidor"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5.2. Configuración necesaria en el servidor </h3> <p>Para ejecutar Java en el lado del servidor, lo más apropiado es instalar Tomcat. Es el servidor de referencia para la tecnología JSP.</p> <p>Apache Tomcat es un servidor web capaz de contener y servir los servlets de Java. Implementa todos los servicios necesarios para que JSP funcione correctamente. Existen otros servidores, como JBoss o Embarcadero, pero Tomcat continúa siendo el más extendido en la actualidad. Como se ejecuta sobre la máquina virtual de Java, es posible hacerlo funcionar en cualquier sistema operativo.</p> <p>Otras soluciones, como ejecutar JSP a través de CGI en un servidor web convencional, son técnicamente viables pero resultan mucho más lentas.</p> <h3 id="853-sintaxis-básica-de-jsp"> <a href="#853-sintaxis-básica-de-jsp" class="anchor-heading" aria-labelledby="853-sintaxis-básica-de-jsp"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5.3. Sintaxis básica de JSP </h3> <p>El código JSP se embebe en HTML de este modo:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>...<span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    Este texto se ha generado desde HTML<span class="nt">&lt;br/&gt;</span>
    <span class="nt">&lt;</span><span class="err">%</span>
      <span class="na">out.println</span><span class="err">("</span><span class="na">Y</span> <span class="na">este</span> <span class="na">se</span> <span class="na">ha</span> <span class="na">generado</span> <span class="na">con</span> <span class="na">JSP</span><span class="err">");</span>
    <span class="err">%</span><span class="nt">&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div> <p>Las variables se declaran como en cualquier programa Java. Por ejemplo:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="kt">var</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
<span class="n">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"La variable var vale "</span> <span class="o">+</span> <span class="kt">var</span><span class="o">);</span>
</code></pre></div></div> <p>Estos son los operadores más habituales:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">Comparación:</span> <span class="o">&lt;,</span> <span class="o">&gt;,</span> <span class="o">&lt;=,</span> <span class="o">&gt;=,</span> <span class="o">==,</span> <span class="o">!=</span> 
<span class="nl">Asignación:</span> <span class="o">=</span>
</code></pre></div></div> <p>Y estas son algunas estructuras de control:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="o">(</span><span class="n">condicion</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">Acciones</span><span class="o">;</span>
<span class="o">}</span>

<span class="k">if</span> <span class="o">(</span><span class="n">condicion</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">Acciones</span><span class="o">-</span><span class="mi">1</span><span class="o">;</span>
<span class="o">}</span>
<span class="k">else</span> <span class="o">{</span>
  <span class="nc">Acciones</span><span class="o">-</span><span class="mi">2</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="854-entrada--salida"> <a href="#854-entrada--salida" class="anchor-heading" aria-labelledby="854-entrada--salida"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5.4. Entrada / Salida </h3> <p>La entrada de datos a través de un formulario HTML se hace usando el objeto request, que estará precargado en cualquier Servlet. La salida se puede hacer con un simple System.out.println():</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Leer datos de un formulario:</span>
<span class="n">variable</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"campo"</span><span class="o">);</span>

<span class="c1">// Salida:</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span> <span class="o">(</span><span class="s">"cadena"</span> <span class="o">+</span> <span class="n">variable</span> <span class="o">+</span> <span class="s">"cadena2"</span><span class="o">);</span> 
</code></pre></div></div> <h3 id="855-bibliotecas-clases-y-métodos"> <a href="#855-bibliotecas-clases-y-métodos" class="anchor-heading" aria-labelledby="855-bibliotecas-clases-y-métodos"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5.5. Bibliotecas, clases y métodos </h3> <p>La forma de escribir clases y métodos en JSP es la misma que en Java, como es lógico. No vamos a explicar aquí todas las peculiaridades del lenguaje, que son muchas y pintorescas. Solo recordaremos que, en Java, no pueden existir métodos fuera de las clases, porque es un lenguaje orientado a objetos bastante estricto.</p> <p>La sintaxis para declarar una clase, sus atributos y sus métodos es esta:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">MiClase</span> <span class="kd">extends</span> <span class="nc">ClaseMadre</span> <span class="o">{</span>

   <span class="kd">public</span><span class="o">|</span><span class="kd">private</span><span class="o">|</span><span class="kd">protected</span> <span class="n">tipo</span> <span class="n">atributo</span><span class="o">;</span>

   <span class="kd">public</span><span class="o">|</span><span class="kd">private</span><span class="o">|</span><span class="kd">protected</span> <span class="n">tipo</span> <span class="nf">nombre</span><span class="o">(</span><span class="n">params</span><span class="o">)</span> <span class="o">{</span>
       <span class="nc">Acciones</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>Cada clase debe ir en un archivo independiente con el mismo nombre que la clase que contiene.</p> <p>Las clases de Java pueden agruparse en paquetes (<em>packages</em>). La forma de importar un paquete para usar sus clases en nuestro programa es:</p> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">paquete</span><span class="o">;</span>       <span class="c1">// Esto importa el paquete completo</span>
<span class="kn">import</span> <span class="nn">paquete.clase</span><span class="o">;</span> <span class="c1">// Esto importa solo una clase del paquete</span>
</code></pre></div></div> <p>Pero cuidado, cuando se trabaja con JSP existe una pequeña diferencia en la forma de importar paquetes: en lugar de la sentencia <em>import</em>, se debe emplear una directiva del precompilador. Las directivas son instrucciones para el precompilador de Java que modifican su modo de proceder durante la compilación. Todas las directivas empiezan por el símbolo “@”.</p> <p>En el caso concreto de la importación de paquetes o clases en un script JSP, la directiva que debemos emplear es:</p> <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;%@ page </span><span class="na">import=</span><span class="s">"paquete"</span> <span class="nt">%&gt;</span>
</code></pre></div></div> <h3 id="856-ejemplo-1-en-jsp-hola-mundo"> <a href="#856-ejemplo-1-en-jsp-hola-mundo" class="anchor-heading" aria-labelledby="856-ejemplo-1-en-jsp-hola-mundo"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5.6. Ejemplo 1 en JSP: Hola mundo </h3> <p>&lt;% out.println(“&lt;html&gt;&lt;body&gt;”); out.println(“&lt;h1&gt;Hola, mundo&lt;/h1&gt;”); out.println(“&lt;/body&gt;&lt;/html&gt;”); %&gt;</p> <h3 id="857-ejemplo-2-en-jsp-login-con-comprobación-de-email-por-ajax"> <a href="#857-ejemplo-2-en-jsp-login-con-comprobación-de-email-por-ajax" class="anchor-heading" aria-labelledby="857-ejemplo-2-en-jsp-login-con-comprobación-de-email-por-ajax"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.5.7. Ejemplo 2 en JSP: login con comprobación de email por Ajax </h3> <p>Nuevamente, mostraremos solo el script del lado del sevidor (login.jsp). El código del lado del cliente lo tienes disponible en la sección que dedicamos al lenguaje Perl, donde solo tendrás que cambiar la referencia a “login.pl” por “login.jsp”.</p> <div class="language-jsp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;%</span> <span class="nd">@page</span> <span class="kn">import</span><span class="err">="</span><span class="nn">java.sql.*</span><span class="s">"

# Conectamos a la BD
Connection conex = null;
Statement st = null;
Class.forName("</span><span class="n">org</span><span class="o">.</span><span class="na">gjt</span><span class="o">.</span><span class="na">mm</span><span class="o">.</span><span class="na">mysql</span><span class="o">.</span><span class="na">Driver</span><span class="s">");
conex = DriverManager.getConnection("</span><span class="nl">jdbc:mysql:</span><span class="c1">//servidor", "user", "pass");</span>

<span class="err">#</span> <span class="nc">Recuperamos</span> <span class="n">la</span> <span class="n">información</span> <span class="n">del</span> <span class="n">formulario</span>
<span class="n">name</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"username"</span><span class="o">);</span>
<span class="n">pass</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getParameter</span><span class="o">(</span><span class="s">"password"</span><span class="o">);</span>

<span class="err">#</span> <span class="nc">Consultamos</span> <span class="n">usuario</span> <span class="n">y</span> <span class="n">contraseña</span> <span class="n">en</span> <span class="n">la</span> <span class="n">base</span> <span class="n">de</span> <span class="n">datos</span>
<span class="n">st</span> <span class="o">=</span> <span class="n">conex</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
<span class="nc">ResultSet</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">"SELECT id FROM users WHERE user = '"</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> 
            <span class="s">"' AND password = '"</span> <span class="o">+</span> <span class="n">pass</span> <span class="o">+</span> <span class="s">"'"</span><span class="o">);</span>

<span class="err">#</span> <span class="nc">Generamos</span> <span class="n">la</span> <span class="n">respuesta</span> <span class="no">JSON</span> <span class="n">para</span> <span class="n">el</span> <span class="n">cliente</span>
<span class="nf">if</span> <span class="o">(</span><span class="n">st</span><span class="o">.</span><span class="na">EOF</span><span class="o">)</span>
   <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"{'error': 'Usuario o contraseña incorrectos'}"</span><span class="o">);</span>
<span class="k">else</span>
   <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"{'success': 'Autenticación correcta', 'userid':"</span><span class="o">+</span> <span class="nc">ResultSet</span><span class="o">.</span><span class="na">getInt</span><span class="o">()</span> <span class="o">+</span> <span class="s">"}"</span><span class="o">);</span>
<span class="n">conex</span><span class="o">.</span><span class="na">close</span><span class="o">()</span>
<span class="nt">%&gt;</span>
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
