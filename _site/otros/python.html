<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>8.3 Python - DAW DOCS</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>8.3 Python | DAW DOCS</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="8.3 Python" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="/otros/python" /> <meta property="og:url" content="/otros/python" /> <meta property="og:site_name" content="DAW DOCS" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="8.3 Python" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/otros/python","headline":"8.3 Python","description":"Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> DAW DOCS </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/" class="nav-list-link">Desarrollo Web en Entorno Servidor</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/cms/" class="nav-list-link">1 Sistemas gestores de contenido (CMS)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/cms/algunas-cosas-que-debes-saber" class="nav-list-link">1.1 Algunas cosas que debes saber sobre los CMS</a> </li><li class="nav-list-item "> <a href="/cms/wordpress" class="nav-list-link">1.2 Wordpress</a> </li><li class="nav-list-item "> <a href="/cms/moodle" class="nav-list-link">1.3 Moodle</a> </li><li class="nav-list-item "> <a href="/cms/prestashop" class="nav-list-link">1.4 Prestashop</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/php/" class="nav-list-link">2 Introducción a PHP</a><ul class="nav-list"><li class="nav-list-item "> <a href="/php/programacion-cliente-servidor" class="nav-list-link">2.1 Programación cliente-servidor</a> </li><li class="nav-list-item "> <a href="/php/caja-de-herramientas" class="nav-list-link">2.2 Caja de herramientas</a> </li><li class="nav-list-item "> <a href="/php/sintaxis-de-php" class="nav-list-link">2.3 Sintaxis de PHP</a> </li><li class="nav-list-item "> <a href="/php/interaccion-con-php" class="nav-list-link">2.4 Interacción con la base de datos</a> </li><li class="nav-list-item "> <a href="/php/ejercicios-resueltos" class="nav-list-link">2.5 Mis primeras aplicaciones web</a> </li></ul></li><li class="nav-list-item "><a href="/cookies-sesiones-seguridad/" class="nav-list-link">3 Cookies, sesiones y seguridad</a></li><li class="nav-list-item "><a href="/mvc/" class="nav-list-link">4 Arquitectura MVC</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/laravel/" class="nav-list-link">5 Laravel</a><ul class="nav-list"><li class="nav-list-item "> <a href="/laravel/1" class="nav-list-link">5.1 Frameworks PHP MVC</a> </li><li class="nav-list-item "> <a href="/laravel/2" class="nav-list-link">5.2 Características de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/3" class="nav-list-link">5.3 Instalación de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/4" class="nav-list-link">5.4 Arquitectura, convenciones y configuración de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/5" class="nav-list-link">5.5 Artisan</a> </li><li class="nav-list-item "> <a href="/laravel/6" class="nav-list-link">5.6 Primeros pasos con Laravel. Hola mundo</a> </li><li class="nav-list-item "> <a href="/laravel/7" class="nav-list-link">5.7 Enrutamiento</a> </li><li class="nav-list-item "> <a href="/laravel/8" class="nav-list-link">5.8 Vistas y plantillas. Blade</a> </li><li class="nav-list-item "> <a href="/laravel/9" class="nav-list-link">5.9 Controladores</a> </li><li class="nav-list-item "> <a href="/laravel/10" class="nav-list-link">5.10 Migraciones</a> </li><li class="nav-list-item "> <a href="/laravel/11" class="nav-list-link">5.11 Usando la BD con Eloquent</a> </li><li class="nav-list-item "> <a href="/laravel/12" class="nav-list-link">5.12 Usando la BD con QueryBuilder</a> </li><li class="nav-list-item "> <a href="/laravel/13" class="nav-list-link">5.13 Sesiones con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/14" class="nav-list-link">5.14 Helpers de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/15" class="nav-list-link">5.15 Flujo de trabajo típico con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/16" class="nav-list-link">5.16 Laravel y Vue.js</a> </li><li class="nav-list-item "> <a href="/laravel/17" class="nav-list-link">5.17 Aspectos avanzados de Laravel</a> </li></ul></li><li class="nav-list-item "><a href="/servicios-web/" class="nav-list-link">6 Servicios web</a></li><li class="nav-list-item "><a href="/ajax/" class="nav-list-link">7 Ajax</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/otras-tecnologias/" class="nav-list-link">8 Otras tecnologías</a><ul class="nav-list"><li class="nav-list-item "> <a href="/otros/cgi" class="nav-list-link">8.1 CGI</a> </li><li class="nav-list-item "> <a href="/otros/perl" class="nav-list-link">8.2 Perl</a> </li><li class="nav-list-item active"> <a href="/otros/python" class="nav-list-link active">8.3 Python</a> </li><li class="nav-list-item "> <a href="/otros/.net" class="nav-list-link">8.4 .NET</a> </li><li class="nav-list-item "> <a href="/otros/jsp" class="nav-list-link">8.5 JSP</a> </li><li class="nav-list-item "> <a href="/otros/ruby" class="nav-list-link">8.6 Ruby</a> </li><li class="nav-list-item "> <a href="/otros/nodejs" class="nav-list-link">8.7 NodeJS</a> </li><li class="nav-list-item "> <a href="/otros/mas-tecnologias-aun" class="nav-list-link">8.8 Más tecnologías aún</a> </li></ul></li><li class="nav-list-item "><a href="/scv-git/" class="nav-list-link">Apéndice I. Sistemas de control de versiones. Git</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DAW DOCS" aria-label="Search DAW DOCS" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Desarrollo Web en Entorno Servidor</a></li> <li class="breadcrumb-nav-list-item"><a href="/otras-tecnologias/">8 Otras tecnologías</a></li> <li class="breadcrumb-nav-list-item"><span>8.3 Python</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="83-python"> <a href="#83-python" class="anchor-heading" aria-labelledby="83-python"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3. Python </h2> <h3 id="831-características-del-lenguaje-python"> <a href="#831-características-del-lenguaje-python" class="anchor-heading" aria-labelledby="831-características-del-lenguaje-python"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3.1. Características del lenguaje Python </h3> <p>Fecha de aparición: 1991</p> <p>Perspectivas:</p> <ul> <li>Uso creciente.</li> <li>Es el sustituto natural de Perl para el desarrollo rápido de scripts.</li> <li>También usado en grandes proyectos como alternativa a PHP.</li> <li>Menos extendido que PHP, pero comunidad con muchos desarrolladores profesionales (mejor relación señal/ruido)</li> <li>Muchas bibliotecas de terceros → flexibilidad</li> </ul> <p>Filosofía:</p> <ul> <li>Es la versión “limpia” de Perl. Pensado para escribir scripts de forma rápida y limpia.</li> <li>Énfasis en la legibilidad: Python es casi pseudocódigo (código “pythonico” → v. “El Zen de Python”)</li> <li>Interpretado. Tipado dinámico. Fuertemente tipado.</li> <li>Expresiones regulares heredadas de Perl.</li> <li>Multiparadigma: imperativo, O.O., funcional.</li> </ul> <h3 id="832-configuración-necesaria-en-el-servidor"> <a href="#832-configuración-necesaria-en-el-servidor" class="anchor-heading" aria-labelledby="832-configuración-necesaria-en-el-servidor"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3.2. Configuración necesaria en el servidor </h3> <p>Para hacer funcionar Python en un servidor Apache o similar, es necesario:</p> <ol> <li>Instalar el intérprete Python (/usr/bin/python). El más extendido es CPhyton.</li> <li>Activar los módulos python y/o cgi de Apache y configurar el handler de Apache para CGI.</li> <li>Instalar módulos adicionales (p. ej: para acceso a bases de datos) si es necesario.</li> </ol> <p>Python puede funcionar de forma nativa integrado en Apache o a través de CGI. Lo primero es más rápido; lo segundo, más frecuente.</p> <h3 id="833-sintaxis-básica-de-python"> <a href="#833-sintaxis-básica-de-python" class="anchor-heading" aria-labelledby="833-sintaxis-básica-de-python"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3.3. Sintaxis básica de Python </h3> <p>Las variables en Python no se declaran obligatoriamente: tienen tipado dinámico y son locales por defecto.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">varariable</span> <span class="o">=</span> <span class="n">valor</span><span class="p">;</span>
<span class="k">print</span> <span class="s">"La variable var vale %s"</span> <span class="p">(</span><span class="n">variable</span><span class="p">);</span>
</code></pre></div></div> <p>En Python hay muchos tipos de datos complejos predefinidos: listas, tuplas, diccionarios…</p> <p>Algunos operadores son:</p> <ul> <li>Comparación: &lt;, &gt;, &lt;=, &gt;=, ==, !=</li> <li>Asignación: =</li> </ul> <p>Y estas son algunas estructuras de control. <strong>¡Cuidado! ¡El código debe indentarse OBLIGATORIAMENTE!</strong> No existen las llaves ({ y }) en Python. ¡La indentación (o sangrado) marca los bloques!</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">while</span> <span class="n">condicion</span><span class="p">:</span>
  <span class="n">Acciones</span>

<span class="k">if</span> <span class="n">condicion</span><span class="p">:</span>
  <span class="n">Acciones</span><span class="o">-</span><span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">Acciones</span><span class="o">-</span><span class="mi">2</span>
</code></pre></div></div> <h3 id="834-entrada--salida"> <a href="#834-entrada--salida" class="anchor-heading" aria-labelledby="834-entrada--salida"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3.4. Entrada / Salida </h3> <p>La entrada de datos por teclado puede hacerse con raw_input():</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">variable</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">"Texto"</span><span class="p">)</span>
</code></pre></div></div> <p>Pero a nosotros nos interesa hacer entrada de datos a través de un formulario HTML. Esto se hace así:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">cgi</span>
<span class="n">form</span> <span class="o">=</span> <span class="n">cgi</span><span class="p">.</span><span class="n">FieldStorage</span><span class="p">()</span>
<span class="n">campo</span> <span class="o">=</span> <span class="n">form</span><span class="p">[</span><span class="s">"campo"</span><span class="p">].</span><span class="n">value</span>
</code></pre></div></div> <p>En cuanto a la salida de datos, se usa <strong><em>print</em></strong> con cadenas de formato, seguida de una lista de variables. Cada elemento de la cadena de formato marcado con un % se sustituirá por una variable de la lista, en el mismo orden en el que estén escritas. Por ejemplo:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span> <span class="s">"cadena %s cadena %s ..."</span> <span class="p">(</span><span class="n">variable1</span><span class="p">,</span> <span class="n">variable2</span><span class="p">)</span> 
</code></pre></div></div> <p>El símbolo %s significa que en esa posición irá un String. Otras posibilidades son %d (enteros) o %f (float). Esta forma de especificar las cadenas de formato está directamente tomada del lenguaje C.</p> <p>En Python existen muchas otras formas de hacer una salida de datos, pero <strong><em>print</em></strong> es lo suficientemente potente como para que puedas utilizarla para cualquier cosa imaginable en una aplicación web.</p> <h3 id="835-bibliotecas-funciones-y-clases"> <a href="#835-bibliotecas-funciones-y-clases" class="anchor-heading" aria-labelledby="835-bibliotecas-funciones-y-clases"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3.5. Bibliotecas, funciones y clases </h3> <p>En Python hay tres niveles de agrupación de bibliotecas:</p> <ul> <li>Módulos: un módulo es un fichero con código Python en su interior. Puede ser una clase o un puñado de funciones sueltas, por ejemplo.</li> <li>Paquetes (<em>packages</em>): un paquete es un directorio que contiene varios módulos. También puede contener subpaquetes. Los paquetes se instalan y desinstalan con un gestor de paquetes (como <em>pip</em>, que viene a ser como <em>composer</em> en PHP).</li> <li>Bibliotecas (<em>libraries</em>): una biblioteca es cualquier fragmento de código reutilizable que se puede incluir en otros proyectos. Las bibliotecas pueden ser paquetes o no. Existe una <em>Python Standard Library</em> que contiene todas las funciones básicas de Python y viene preinstalada con el <em>core</em> del lenguaje.</li> </ul> <p>Podemos incluir una librería en nuestro proyecto Python usando la palabra <em>import</em>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">mi</span><span class="o">-</span><span class="n">librería</span>
</code></pre></div></div> <p>Como hemos dicho, dentro de cada módulo puede haber clases o subrutinas sueltas. Una subrutina (procedimiento o función) se declara así en Python (observa de nuevo como la indentación o sangrado es fundamental porque marca el comienzo y final de los bloques de código):</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">mi</span><span class="o">-</span><span class="n">funcion</span><span class="p">(</span><span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">,</span> <span class="n">etc</span><span class="p">):</span>
    <span class="c1"># Aquí va el código de la función
</span>    <span class="p">[</span><span class="k">return</span> <span class="n">valor1</span><span class="p">,</span> <span class="n">varlor2</span><span class="p">...]</span>
</code></pre></div></div> <p>En cuanto a las clases, la sintaxis para declararlas y muy similar a PHP, Java o C++ (recordando que, en Python, no se usan las llaves sino la indentación):</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">MyClass</span><span class="p">:</span>
    
    <span class="n">un_atributo</span> <span class="o">=</span> <span class="n">valor</span>
    <span class="n">otro_atributo</span> <span class="o">=</span> <span class="n">valor</span>

    <span class="c1"># Esto es un constructor
</span>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">un_atributo</span> <span class="o">=</span> <span class="mi">0</span>
 

    <span class="k">def</span> <span class="nf">un_metodo</span><span class="p">(</span><span class="n">parámetros</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">lo_que_sea</span>
</code></pre></div></div> <h3 id="836-ejemplo-1-en-python-hola-mundo"> <a href="#836-ejemplo-1-en-python-hola-mundo" class="anchor-heading" aria-labelledby="836-ejemplo-1-en-python-hola-mundo"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3.6. Ejemplo 1 en Python: Hola mundo </h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/python
</span><span class="k">print</span> <span class="s">"Content-type: text/html</span><span class="se">\n\n</span><span class="s">"</span>
<span class="k">print</span> <span class="s">"&lt;html&gt;&lt;body&gt;"</span>
<span class="k">print</span> <span class="s">"&lt;h1&gt;Hola, mundo&lt;/h1&gt;"</span>
<span class="k">print</span> <span class="s">"&lt;/body&gt;&lt;/html&gt;"</span>
</code></pre></div></div> <h3 id="837-ejemplo-2-en-python-login-con-comprobación-de-email-por-ajax"> <a href="#837-ejemplo-2-en-python-login-con-comprobación-de-email-por-ajax" class="anchor-heading" aria-labelledby="837-ejemplo-2-en-python-login-con-comprobación-de-email-por-ajax"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 8.3.7. Ejemplo 2 en Python: login con comprobación de email por Ajax </h3> <p>Repetimos ahora el ejemplo del login con comprobación de usuario y contraseña mediante Ajax, pero no mostraremos de nuevo el código del formulario ni de la llamada Ajax. Para ver ese código, revisa la sección que dedicamos al lenguaje Perl. Allí solo tendrás que cambiar el nombre del script (login.pl) por login.py.</p> <p>El código de ese script sí que cambia, claro. Esta es la versión del mismo escrita en Python:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/python
</span>
<span class="kn">import</span> <span class="nn">cgi</span>
<span class="kn">import</span> <span class="nn">MySQLdb</span> 

<span class="c1"># Capturamos los valores del formulario
</span><span class="n">form</span> <span class="o">=</span> <span class="n">cgi</span><span class="p">.</span><span class="n">FieldStorage</span><span class="p">()</span>
<span class="n">usuario</span> <span class="o">=</span> <span class="n">form</span><span class="p">[</span><span class="s">"username"</span><span class="p">].</span><span class="n">value</span><span class="p">;</span>
<span class="n">password</span> <span class="o">=</span> <span class="n">form</span><span class="p">[</span><span class="s">"password"</span><span class="p">].</span><span class="n">value</span><span class="p">;</span>

<span class="k">print</span> <span class="s">"Usuario = "</span><span class="p">,</span> <span class="n">usuario</span><span class="p">,</span> <span class="s">" Pass = "</span><span class="p">,</span> <span class="n">password</span>

<span class="c1"># Lanzamos la consulta contra la base de datos
</span><span class="n">db</span><span class="o">=</span><span class="n">MySQLdb</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s">'localhost'</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s">'yo-que-sé'</span><span class="p">,</span> <span class="n">passwd</span><span class="o">=</span><span class="s">'vete-a-saber'</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">'lo-que-sea'</span><span class="p">)</span>
<span class="n">cursor</span><span class="o">=</span><span class="n">db</span><span class="p">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">num_rows</span> <span class="o">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">"SELECT id FROM users WHERE username = '%s' AND password = '%s';"</span><span class="p">,</span> <span class="p">(</span><span class="n">usuario</span><span class="p">,</span> <span class="n">password</span><span class="p">))</span>
<span class="n">userid</span> <span class="o">=</span> <span class="n">cursor</span><span class="p">.</span><span class="n">fetchone</span><span class="p">()</span>

<span class="c1"># Devolvemos el resultado en JSON
</span><span class="k">print</span> <span class="s">"Content-type: application/json</span><span class="se">\n</span><span class="s">"</span>
<span class="k">if</span> <span class="n">num_rows</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
   <span class="k">print</span> <span class="s">"{'error': 'Usuario o contraseña incorrectos'}"</span>
<span class="k">else</span><span class="p">:</span>
   <span class="k">print</span> <span class="s">"{'success': 'El usuario y la contraseña son válidos', 'userid': '%d'"</span><span class="p">,</span> <span class="n">userid</span>
</code></pre></div></div> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
