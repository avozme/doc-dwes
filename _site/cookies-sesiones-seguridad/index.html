<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>3 Cookies, sesiones y seguridad - DAW DOCS</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>3 Cookies, sesiones y seguridad | DAW DOCS</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="3 Cookies, sesiones y seguridad" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="/cookies-sesiones-seguridad/" /> <meta property="og:url" content="/cookies-sesiones-seguridad/" /> <meta property="og:site_name" content="DAW DOCS" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="3 Cookies, sesiones y seguridad" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/cookies-sesiones-seguridad/","headline":"3 Cookies, sesiones y seguridad","description":"Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> DAW DOCS </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/" class="nav-list-link">Desarrollo Web en Entorno Servidor</a><ul class="nav-list "><li class="nav-list-item "><a href="/cms/" class="nav-list-link">1 Sistemas gestores de contenido (CMS)</a></li><li class="nav-list-item "><a href="/php/" class="nav-list-link">2 Introducción a PHP</a></li><li class="nav-list-item active"><a href="/cookies-sesiones-seguridad/" class="nav-list-link active">3 Cookies, sesiones y seguridad</a></li><li class="nav-list-item "><a href="/mvc/" class="nav-list-link">4 Arquitectura MVC</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/laravel/" class="nav-list-link">5 Laravel</a><ul class="nav-list"><li class="nav-list-item "> <a href="/laravel/1" class="nav-list-link">5.1 Frameworks PHP MVC</a> </li><li class="nav-list-item "> <a href="/laravel/2" class="nav-list-link">5.2 Características de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/3" class="nav-list-link">5.3 Instalación de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/4" class="nav-list-link">5.4 Arquitectura, convenciones y configuración de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/5" class="nav-list-link">5.5 Artisan</a> </li><li class="nav-list-item "> <a href="/laravel/6" class="nav-list-link">5.6 Primeros pasos con Laravel. Hola mundo</a> </li><li class="nav-list-item "> <a href="/laravel/7" class="nav-list-link">5.7 Enrutamiento</a> </li><li class="nav-list-item "> <a href="/laravel/8" class="nav-list-link">5.8 Vistas y plantillas. Blade</a> </li><li class="nav-list-item "> <a href="/laravel/9" class="nav-list-link">5.9 Controladores</a> </li><li class="nav-list-item "> <a href="/laravel/10" class="nav-list-link">5.10 Migraciones</a> </li><li class="nav-list-item "> <a href="/laravel/11" class="nav-list-link">5.11 Usando la BD con Eloquent</a> </li><li class="nav-list-item "> <a href="/laravel/12" class="nav-list-link">5.12 Usando la BD con QueryBuilder</a> </li><li class="nav-list-item "> <a href="/laravel/13" class="nav-list-link">5.13 Sesiones con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/14" class="nav-list-link">5.14 Helpers de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/15" class="nav-list-link">5.15 Flujo de trabajo típico con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/16" class="nav-list-link">5.16 Laravel y Vue.js</a> </li><li class="nav-list-item "> <a href="/laravel/17" class="nav-list-link">5.17 Aspectos avanzados de Laravel</a> </li></ul></li><li class="nav-list-item "><a href="/servicios-web/" class="nav-list-link">6 Servicios web</a></li><li class="nav-list-item "><a href="/ajax/" class="nav-list-link">7 Ajax</a></li><li class="nav-list-item "><a href="/otras-tecnologias/" class="nav-list-link">8 Otras tecnologías</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DAW DOCS" aria-label="Search DAW DOCS" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Desarrollo Web en Entorno Servidor</a></li> <li class="breadcrumb-nav-list-item"><span>3 Cookies, sesiones y seguridad</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="3-cookies-sesiones-y-seguridad"> <a href="#3-cookies-sesiones-y-seguridad" class="anchor-heading" aria-labelledby="3-cookies-sesiones-y-seguridad"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3. Cookies, sesiones y seguridad </h1> <h2 id="31-autenticación-mediante-acl"> <a href="#31-autenticación-mediante-acl" class="anchor-heading" aria-labelledby="31-autenticación-mediante-acl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.1. Autenticación mediante ACL </h2> <p>Casi todas las aplicaciones web incluyen un subsistema de autenticación de usuarios (ACL = Access Control Login). Ese subsistema suele estar basado en este diseño de base de datos:</p> <p>XXX esquema</p> <h2 id="32-cookies"> <a href="#32-cookies" class="anchor-heading" aria-labelledby="32-cookies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.2. Cookies </h2> <p>Las cookies son variables que se guardan en el ordenador del cliente.</p> <p>Sintaxis: bool setcookie ( string $name [, string $value [, int $expire = 0 [, string $path [, string $domain [, bool $secure = false [, bool $httponly = false ]]]]]] )</p> <p>Ejemplo: setcookie(“TestCookie”, $value, time()+3600);</p> <p>Para acceder al valor de una cookie: $_COOKIE[“NombreCookie”];</p> <p>Ejemplo: echo “La cookie TestCookie vale “.$_COOKIE[“TestCookie”];</p> <h2 id="33-sesiones"> <a href="#33-sesiones" class="anchor-heading" aria-labelledby="33-sesiones"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.3. Sesiones </h2> <p>Las sesiones sirven para guardar variables en el servidor. Esas variables sólo son accesibles para el cliente que creó esa sesión.</p> <p>Sintaxis: session_start(); $_SESSION[“variable”] = $valor;</p> <p>Algunas funciones para manejar sesiones:</p> <p>// Abre una sesión o la retoma si ya estaba abierta session_start(); // Cierra una sesión abierta y destruye sus variables session_destroy(); // Devuelve el ID de la sesión session_id(); // Destruye todas las variables de sesión session_unset();</p> <h2 id="34-sesiones-cookies-y-seguridad"> <a href="#34-sesiones-cookies-y-seguridad" class="anchor-heading" aria-labelledby="34-sesiones-cookies-y-seguridad"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.4. Sesiones, cookies y seguridad </h2> <p>Cookies y variables de sesión se usan a menudo para controlar la seguridad de la aplicación web. Por ejemplo, tras el login, el ID del usuario puede almacenarse en: Una cookie. Si existe esa cookie, significa que el login ha sido correcto y la aplicación puede continuar. Una variable de sesión. Si existe tal variable, el login ha sido correcto. Cuando el usuario abandona la aplicación, el programa debe destruir la cookie o cerrar la sesión.</p> <p>¡Ningún método es completamente seguro! Las cookies pueden rastrearse o modificarse en el ordenador del cliente. Además, algunos clientes las tienen desactivadas. ¡No te puedes fiar de ellas! Las variables de sesión, en principio más seguras, pueden ser atacadas capturando el ID de sesión. El método más seguro, y el más complicado de programar, es el que combina: Cookies y/o variables de sesión. Variables guardadas en una tabla de la BD.</p> <h2 id="35-técnicas-de-ataque-frecuentes"> <a href="#35-técnicas-de-ataque-frecuentes" class="anchor-heading" aria-labelledby="35-técnicas-de-ataque-frecuentes"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5. Técnicas de ataque frecuentes </h2> <h3 id="351-captura-de-id-de-sesión"> <a href="#351-captura-de-id-de-sesión" class="anchor-heading" aria-labelledby="351-captura-de-id-de-sesión"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.1. Captura de ID de sesión </h3> <p>El ID de sesión se pasa entre páginas de forma transparente a través de cookies o de la URL (con POST). Un atacante puede leer el ID de sesión en el paquete http y acceder a las variables de sesión. Solución: Combinar las variables de sesión con cookies o con entradas en la base de datos. No confiar en variables de sesión para información sensible.</p> <h3 id="352-inyección-de-sql"> <a href="#352-inyección-de-sql" class="anchor-heading" aria-labelledby="352-inyección-de-sql"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.2. Inyección de SQL </h3> <p>Se inserta código SQL en campos de formulario. Este código actúa sobre la BD, dando información al atacante sobre su estructura y contenido, o permitiéndole destruir datos. Soluciones: Usar filtros de SQL (MySQLi incluye algunos, como real_scape_string()) Utilizar usuarios de MySQL sin privilegios destructivos (¡root solo en fase de desarrollo!) Filtrar los datos de entrada de los formularios.</p> <h3 id="353-xss-cross-site-scripting"> <a href="#353-xss-cross-site-scripting" class="anchor-heading" aria-labelledby="353-xss-cross-site-scripting"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.3. XSS (cross site scripting) </h3> <p>Se inyecta código JavaScript a través de la URL, de un formulario o de algún otro elemento externo. Ese código JS redirecciona a otra página o tiene algún otro efecto indeseado. Soluciones Filtrar todos los datos externos. Usar listas blancas de datos válidos.</p> <h3 id="354-csrf-cross-site-request-forgery"> <a href="#354-csrf-cross-site-request-forgery" class="anchor-heading" aria-labelledby="354-csrf-cross-site-request-forgery"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.4. CSRF (cross site request forgery) </h3> <p>Consiste en que un usuario accede a partes no permitidas de la aplicación insertando datos maliciosos en la URL o en un formulario. Soluciones: Utilizar POST en lugar de GET para no dar pistas. Generar tokens únicos para cada petición. Filtrar los datos de entrada.</p> <h3 id="355-dt-directory-transversal"> <a href="#355-dt-directory-transversal" class="anchor-heading" aria-labelledby="355-dt-directory-transversal"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.5. DT (directory transversal) </h3> <p>El atacante accede a ficheros fuera del directorio público (htdocs o public_html) mediante rutas relativas (../../ejemplo.php) Sucede cuando la página que se va a cargar se envía como un parámetro en la URL (index.php?page=ejemplo.php) Soluciones: Filtrar el formato de las páginas enviadas por la URL, o tener una lista de páginas válidas.</p> <h3 id="356-rfi-remote-file-inclusion"> <a href="#356-rfi-remote-file-inclusion" class="anchor-heading" aria-labelledby="356-rfi-remote-file-inclusion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 3.5.6. RFI (remote file inclusion) </h3> <p>Consiste en acceder al sistema de ficheros del servidor mediante inyección de código malicioso en la URL o en un formulario (por ejemplo, con el comando exec de SQL) Soluciones: Filtrar datos de entrada. Tener una lista de páginas válidas.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
