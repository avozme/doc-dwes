<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>5.8 Vistas y plantillas. Blade - DAW DOCS</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>5.8 Vistas y plantillas. Blade | DAW DOCS</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="5.8 Vistas y plantillas. Blade" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="/laravel/8" /> <meta property="og:url" content="/laravel/8" /> <meta property="og:site_name" content="DAW DOCS" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="5.8 Vistas y plantillas. Blade" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/laravel/8","headline":"5.8 Vistas y plantillas. Blade","description":"Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> DAW DOCS </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/" class="nav-list-link">Desarrollo Web en Entorno Servidor</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/cms/" class="nav-list-link">1 Sistemas gestores de contenido (CMS)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/cms/algunas-cosas-que-debes-saber" class="nav-list-link">1.1 Algunas cosas que debes saber sobre los CMS</a> </li><li class="nav-list-item "> <a href="/cms/wordpress" class="nav-list-link">1.2 Wordpress</a> </li><li class="nav-list-item "> <a href="/cms/moodle" class="nav-list-link">1.3 Moodle</a> </li><li class="nav-list-item "> <a href="/cms/wordpress" class="nav-list-link">1.4 Prestashop</a> </li></ul></li><li class="nav-list-item "><a href="/php/" class="nav-list-link">2 Introducción a PHP</a></li><li class="nav-list-item "><a href="/cookies-sesiones-seguridad/" class="nav-list-link">3 Cookies, sesiones y seguridad</a></li><li class="nav-list-item "><a href="/mvc/" class="nav-list-link">4 Arquitectura MVC</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/laravel/" class="nav-list-link">5 Laravel</a><ul class="nav-list"><li class="nav-list-item "> <a href="/laravel/1" class="nav-list-link">5.1 Frameworks PHP MVC</a> </li><li class="nav-list-item "> <a href="/laravel/2" class="nav-list-link">5.2 Características de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/3" class="nav-list-link">5.3 Instalación de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/4" class="nav-list-link">5.4 Arquitectura, convenciones y configuración de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/5" class="nav-list-link">5.5 Artisan</a> </li><li class="nav-list-item "> <a href="/laravel/6" class="nav-list-link">5.6 Primeros pasos con Laravel. Hola mundo</a> </li><li class="nav-list-item "> <a href="/laravel/7" class="nav-list-link">5.7 Enrutamiento</a> </li><li class="nav-list-item active"> <a href="/laravel/8" class="nav-list-link active">5.8 Vistas y plantillas. Blade</a> </li><li class="nav-list-item "> <a href="/laravel/9" class="nav-list-link">5.9 Controladores</a> </li><li class="nav-list-item "> <a href="/laravel/10" class="nav-list-link">5.10 Migraciones</a> </li><li class="nav-list-item "> <a href="/laravel/11" class="nav-list-link">5.11 Usando la BD con Eloquent</a> </li><li class="nav-list-item "> <a href="/laravel/12" class="nav-list-link">5.12 Usando la BD con QueryBuilder</a> </li><li class="nav-list-item "> <a href="/laravel/13" class="nav-list-link">5.13 Sesiones con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/14" class="nav-list-link">5.14 Helpers de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/15" class="nav-list-link">5.15 Flujo de trabajo típico con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/16" class="nav-list-link">5.16 Laravel y Vue.js</a> </li><li class="nav-list-item "> <a href="/laravel/17" class="nav-list-link">5.17 Aspectos avanzados de Laravel</a> </li></ul></li><li class="nav-list-item "><a href="/servicios-web/" class="nav-list-link">6 Servicios web</a></li><li class="nav-list-item "><a href="/ajax/" class="nav-list-link">7 Ajax</a></li><li class="nav-list-item "><a href="/otras-tecnologias/" class="nav-list-link">8 Otras tecnologías</a></li><li class="nav-list-item "><a href="/scv-git/" class="nav-list-link">Anexo I. Sistemas de control de versiones. Git</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DAW DOCS" aria-label="Search DAW DOCS" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Desarrollo Web en Entorno Servidor</a></li> <li class="breadcrumb-nav-list-item"><a href="/laravel/">5 Laravel</a></li> <li class="breadcrumb-nav-list-item"><span>5.8 Vistas y plantillas. Blade</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="58-vistas-y-plantillas-blade"> <a href="#58-vistas-y-plantillas-blade" class="anchor-heading" aria-labelledby="58-vistas-y-plantillas-blade"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8. Vistas y plantillas. Blade </h2> <p>Blade es un poderoso y sencillo sub-lenguaje que nos permitirá generar plantillas para minimizar el código que necesitamos para nuestras vistas.</p> <p>Las plantillas Blade admiten condiciones y bucles para operar con las variables PHP, de modo que la misma plantilla se comporta de forma diferente con diferentes conjuntos de datos. ¡Y se acabó la pesadilla de abrir y cerrar comillas para concatenar variables a las salidas HTML!</p> <p>Con Blade, ya no será necesario abrir y cerrar php (&lt;?php … ?&gt;) para operar con las variables del servidor y generar la salida. El código no solo será más limpio y fácil de depurar, sino también más seguro, porque se impiden los ataques con XSS.</p> <p>Además, unas plantillas pueden heredar de otras para reutilizar mejor el código.</p> <h3 id="581-master-layout"> <a href="#581-master-layout" class="anchor-heading" aria-labelledby="581-master-layout"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.1. Master layout </h3> <p>El layout es una forma genérica de referirse a un diseño de capas del interfaz de la aplicación. El master layout es el diseño maestro del que derivan todas las vistas.</p> <p>Ese master layout suele almacenarse en un archivo llamado /resources/views/layouts/master.blade.php.</p> <p>Y podría tener, por ejemplo, este aspecto:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nt">&lt;html&gt;</span>
     <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>@yield('Titulo')<span class="nt">&lt;/title&gt;</span>
     <span class="nt">&lt;/head&gt;</span>
     <span class="nt">&lt;body&gt;</span>
        @section('sidebar')
            Este es mi master sidebar.
        @show

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"container"</span><span class="nt">&gt;</span>
            @yield('content')
        <span class="nt">&lt;/div&gt;</span>
     <span class="nt">&lt;/body&gt;</span>
  <span class="nt">&lt;/html&gt;</span>
</code></pre></div></div> <p>Aquí vemos varias directivas importantes de blade:</p> <ul> <li>@yield(‘Titulo’) –&gt; Esto define una sección llamada ‘Título’, que en el master layout está vacía. Las vistas que hereden del master layout tendrán que definir cuál es el valor de ‘Título’, y ese valor aparecerá escrito aquí.</li> <li>@section(‘sidebar’) –&gt; Esto define una sección llamada ‘sidebar’ que NO está vacía (contiene el texto “Este es mi master sidebar”, pero podría contener cualquier otra cosa). Las vistas que hereden del master layout podrán AÑADIR contenido a esta sección.</li> <li>@show –&gt; Hace que el contenido de la sección se muestre en ese punto del documento.</li> <li>@yield(‘content’) –&gt; De nuevo, una sección que está vacía en el master layout y cuyo contenido tendrá que definirse en las vistas que hereden de esta.</li> </ul> <h3 id="582-vistas-que-heredan-del-master-layout"> <a href="#582-vistas-que-heredan-del-master-layout" class="anchor-heading" aria-labelledby="582-vistas-que-heredan-del-master-layout"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.2. Vistas que heredan del master layout </h3> <p>El aspecto de una plantilla que herede del master layout anterior debería ser este:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@extends('master')

@section('title', 'Titulo de la página')

@section('sidebar')
    <span class="nt">&lt;p&gt;</span>Esto se añadirá al master sidebar.<span class="nt">&lt;/p&gt;</span>
@endsection

@section('content')
    <span class="nt">&lt;p&gt;</span>Aquí va el contenido de mi página.<span class="nt">&lt;/p&gt;</span>
@endsection
</code></pre></div></div> <ul> <li>@extends(‘master’) –&gt; Esto indica que esta vista hereda del master layout.</li> <li>@section(‘title, ‘Título de la página’) –&gt; Aquí se define el contenido de la sección ‘Título’ que en el master layout estaba vacía.</li> <li>@section(‘sidebar’) –&gt; Aquí añade contenido a la sección ‘sidebar’, que en el master layout no estaba vacía.</li> <li>@ensection –&gt; Se emplea cuando el contenido de una sección ocupa varias líneas de código y no es posible escribirlo dentro de la propia directiva.</li> </ul> <h3 id="583-cómo-pasar-variables-a-las-vistas"> <a href="#583-cómo-pasar-variables-a-las-vistas" class="anchor-heading" aria-labelledby="583-cómo-pasar-variables-a-las-vistas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.3. Cómo pasar variables a las vistas </h3> <p>Las variables a las vistas deben enviarse empaquetadas en un array. Hay varias formas de lograr esto, todas ellas correctas. Puedes emplear la que te resulte más cómoda o más elegante:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'vista'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'variable1'</span><span class="o">=&gt;</span><span class="s1">'valor'</span><span class="p">,</span> <span class="s1">'variable2'</span><span class="o">=&gt;</span><span class="s1">'valor'</span><span class="p">));</span>
<span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'vista'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'variable1'</span><span class="o">=&gt;</span><span class="s1">'valor'</span><span class="p">,</span> <span class="s1">'variable2'</span><span class="o">=&gt;</span><span class="s1">'valor'</span><span class="p">]);</span>
<span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'vista'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">with</span><span class="p">([</span><span class="s1">'variable1'</span><span class="o">=&gt;</span><span class="s1">'valor'</span><span class="p">,</span> <span class="s1">'variable2'</span><span class="o">=&gt;</span><span class="s1">'valor'</span><span class="p">]);</span>
<span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'vista'</span><span class="p">,</span> <span class="nb">compact</span><span class="p">(</span><span class="s1">'variable1'</span><span class="p">,</span> <span class="s1">'variable2'</span><span class="p">));</span>
</code></pre></div></div> <h3 id="584-cómo-usar-las-variables-en-las-vistas"> <a href="#584-cómo-usar-las-variables-en-las-vistas" class="anchor-heading" aria-labelledby="584-cómo-usar-las-variables-en-las-vistas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.4. Cómo usar las variables en las vistas </h3> <p>Supongamos que tenemos este método en un controlador:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">show</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'page'</span><span class="p">,</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Manolo Escobar'</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div> <p>La variable $name se puede usar en la vista /resources/views/page.blade.php de este modo:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@extends('layouts.master')
   @section('title', 'Page Title')
   @section('sidebar')
      <span class="nt">&lt;p&gt;</span>Esto se añadirá al sidebar del master layout.<span class="nt">&lt;/p&gt;</span>
   @endsection

   @section('content')
     <span class="nt">&lt;h2&gt;</span>{{$name}}<span class="nt">&lt;/h2&gt;</span>   
     <span class="nt">&lt;p&gt;</span>Este es el contenido de mi página.<span class="nt">&lt;/p&gt;</span>
   @endsection
</code></pre></div></div> <h3 id="585-condiciones-en-las-vistas"> <a href="#585-condiciones-en-las-vistas" class="anchor-heading" aria-labelledby="585-condiciones-en-las-vistas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.5. Condiciones en las vistas </h3> <p>Blade admite expresiones condicionales para modificar el aspecto de una vista dependiendo del valor de una variable o del estado de la aplicación.</p> <p>En el siguiente ejemplo, el contenido de la vista depende de la variable $day.</p> <p>Controlador:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">show</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'page'</span><span class="p">,</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Manolo'</span><span class="p">,</span><span class="s1">'day'</span> <span class="o">=&gt;</span> <span class="s1">'Viernes'</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div> <p>Vista /resources/views/page.blade.php:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@extends('layouts.master')
   @section('title', 'Page Title')
   @section('sidebar')
      <span class="nt">&lt;p&gt;</span>Esto se añadirá al sidebar del master layout.<span class="nt">&lt;/p&gt;</span>
   @endsection

   @section('content')
     <span class="nt">&lt;h2&gt;</span>{{$name}}<span class="nt">&lt;/h2&gt;</span>    
      <span class="nt">&lt;p&gt;</span>Este es el contenido de mi página.<span class="nt">&lt;/p&gt;</span>
      @if ($day == 'Viernes')
          <span class="nt">&lt;p&gt;</span>Hoy me roban el carro<span class="nt">&lt;/p&gt;</span>
      @else
          <span class="nt">&lt;p&gt;</span>Hoy me dedico a cantar<span class="nt">&lt;/p&gt;</span>
      @endif
   @endsection
</code></pre></div></div> <p>Observa que esto mismo podría hacerse abriendo y cerrando php (&lt;?php … ?&gt;), pero de este modo el código queda mucho más limpio y resulta menos propenso a errores.</p> <h3 id="586-bucles-en-las-vistas"> <a href="#586-bucles-en-las-vistas" class="anchor-heading" aria-labelledby="586-bucles-en-las-vistas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.6. Bucles en las vistas </h3> <p>Igual que existen condiciones, Blade también permite hacer bucles para simplificar la generación de visas.</p> <p>Por ejemplo, en la siguiente vista recorremos un array llamado $bebidas y mostramos su contenido.</p> <p>Controlador:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">show</span><span class="p">()</span> <span class="p">{</span>
   <span class="nv">$bebidas</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">'Cerveza'</span><span class="p">,</span><span class="s1">'Agua'</span><span class="p">,</span><span class="s1">'Zumo'</span><span class="p">);</span>
   <span class="k">return</span> <span class="nf">view</span><span class="p">(</span><span class="s1">'page'</span><span class="p">,</span><span class="k">array</span><span class="p">(</span><span class="s1">'name'</span> <span class="o">=&gt;</span> <span class="s1">'Manolo'</span><span class="p">,</span><span class="s1">'day'</span> <span class="o">=&gt;</span> <span class="s1">'Lunes'</span><span class="p">,</span>
                            <span class="s1">'bebidas'</span> <span class="o">=&gt;</span> <span class="nv">$bebidas</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div></div> <p>Vista /resources/views/page.blade.php:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@extends('layouts.master')
   @section('title', 'Page Title')
   @section('sidebar')
      <span class="nt">&lt;p&gt;</span>Esto se añadirá al sidebar del master layout.<span class="nt">&lt;/p&gt;</span>
   @endsection

   @section('content')
     <span class="nt">&lt;h2&gt;</span>{{$name}}<span class="nt">&lt;/h2&gt;</span>    
      <span class="nt">&lt;p&gt;</span>Este es el contenido de mi página.<span class="nt">&lt;/p&gt;</span>
      @if ($day == 'Viernes')
          <span class="nt">&lt;p&gt;</span>Hoy me roban el carro<span class="nt">&lt;/p&gt;</span>
      @else
          <span class="nt">&lt;p&gt;</span>Hoy me dedico a cantar<span class="nt">&lt;/p&gt;</span>
      @endif
      <span class="nt">&lt;h2&gt;</span>Estas son las bebidas disponibles:<span class="nt">&lt;/h2&gt;</span>
      @foreach ($bebidas as $bebida)
         {{$bebida}} <span class="nt">&lt;br&gt;</span>
      @endforeach
   @endsection
</code></pre></div></div> <p>Observa que esto mismo podría hacerse abriendo y cerrando php (&lt;?php … ?&gt;), pero de este modo el código queda mucho más limpio y resulta menos propenso a errores.</p> <h3 id="587-invocación-de-funciones-php"> <a href="#587-invocación-de-funciones-php" class="anchor-heading" aria-labelledby="587-invocación-de-funciones-php"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.7. Invocación de funciones PHP </h3> <p>Desde una vista Blade se puede invocar cualquier función de PHP sin necesidad de abrirlo y cerrarlo (&lt;?php … ?&gt;). Por ejemplo, si necesitamos la función date(), la invocamos así:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h2&gt;</span>Ejemplo de llamada a función estándar de PHP<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>La fecha del servidor es: {{date(' D M, Y')}}<span class="nt">&lt;/p&gt;</span>
</code></pre></div></div> <p>Esto es mucho más seguro que abrirlo y cerrarlo php (&lt;?php … ?&gt;) porque filtra posibles ataques XSS. Si alguna vez necesitamos saltarnos la protección contra XSS, debemos usar {!! … !!} en lugar de {{ … }}.</p> <h3 id="588-otras-directivas-blade"> <a href="#588-otras-directivas-blade" class="anchor-heading" aria-labelledby="588-otras-directivas-blade"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.8. Otras directivas Blade </h3> <p>Blade dispone de multitud de directivas para hacer prácticamente cualquier cosa en la vista sin tener que recurrir a PHP. En esta lista mostramos solo las directivas más habituales.</p> <ul> <li><strong>@section</strong> → Marca el inicio de una sección de contenido.</li> <li><strong>@endsection</strong> → Marca el final de una sección.</li> <li><strong>@show</strong> → Marca el final de una sección y la muestra.</li> <li><strong>@yield(‘section’)</strong> → Muestra el contenido de una sección (si existe, claro).</li> <li><strong>@extends(‘view’)</strong> → Hereda de una plantilla padre.</li> <li><strong>@parent</strong> → Muestra el contenido de la sección del mismo nombre en la plantilla padre.</li> <li><strong>@include(‘view’)</strong> → Incluye una subvista.</li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@if</td> <td>@else</td> <td>@endif** → Condicional.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@for</td> <td>@endfor** → Bucle for clásico.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@foreach</td> <td>@endforeach** → Buche foreach.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@forelse</td> <td>@empty</td> <td>@endforelse** → Como foreach, pero con tratamiento de arrays que vienen vacíos.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@break</td> <td>@continue** → Para usar en los bucles.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@switch</td> <td>@case</td> <td>@break** → Condicional múltiple.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@isset($variable)</td> <td>@endisset** → Comprueba si la variable existe.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@auth</td> <td>@endauth** → La sección solo se muestra si hay un usuario autenticado en la aplicación.</td> </tr> </tbody> </table></div> </li> <li> <div class="table-wrapper"><table> <tbody> <tr> <td>**@php</td> <td>@endphp** → Para añadir código PHP plano. Usar con moderación.</td> </tr> </tbody> </table></div> </li> <li><strong>{{- Comment -}}</strong> → Comentarios (no serán renderizados).</li> <li><strong>{{ $variable }}</strong> → Equivalente a echo $variable, pero no es necesario abrir y cerrar PHP, y nos protegemos contra inyección de JS.</li> <li><strong>{{ $variable ?? texto-por-defecto }}</strong> → Como el anterior, pero chequea si la variable existe. Si existe, muestra su valor. Si no, muestra texto-por-defecto.</li> <li><strong>$loop</strong> → Es una variable muy útil para usar en y/o depurar un foreach. Nos dice si estamos en el primer elemento, en el último, cuántos loops llevamos, etc.</li> </ul> <h3 id="589-tratamiento-de-formularios-con-blade"> <a href="#589-tratamiento-de-formularios-con-blade" class="anchor-heading" aria-labelledby="589-tratamiento-de-formularios-con-blade"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.9. Tratamiento de formularios con Blade </h3> <p>Blade también facilita el tratamiento de los formularios.</p> <p>En la vista, creamos el formulario (fíjate cómo indicamos la ruta en el action):</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">action=</span><span class="s">"{{ route('mi-ruta') }}"</span><span class="nt">&gt;</span>
      @csrf   <span class="c">&lt;!-- Para evitar ataques CSRF --&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">name=</span><span class="s">"email"</span><span class="nt">&gt;&lt;br&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"asunto"</span><span class="nt">&gt;&lt;br&gt;</span>
      <span class="nt">&lt;textarea</span> <span class="na">name=</span><span class="s">"contenido"</span><span class="nt">&gt;&lt;/textarea&gt;&lt;br&gt;</span>
      <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"submit"</span><span class="nt">&gt;</span>Enviar<span class="nt">&lt;/button&gt;</span>
   <span class="nt">&lt;/form&gt;</span>
</code></pre></div></div> <p>(Recuerda que los métodos PUT y DELETE no existen aún en HTML y que Laravel los simula con un campo oculto en el formulario que se crea con la directiva @method(‘PUT’) o @method(‘DELETE’))</p> <p>En el enrutador, definimos la ruta “mi-ruta” del action del formulario:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Route</span><span class="o">::</span><span class="nf">post</span><span class="p">(</span><span class="s1">'mi-ruta'</span><span class="p">,</span> <span class="s1">'MiControlador@store'</span><span class="p">);</span>
</code></pre></div></div> <p>Y, en el controlador, creamos el método store(). Observa cómo recuperamos los datos del formulario a través de la variable $r:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">(</span><span class="kt">Request</span> <span class="nv">$r</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$email</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s2">"email"</span><span class="p">);</span>
      <span class="nv">$asunto</span> <span class="o">=</span> <span class="nv">$r</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s2">"asunto"</span><span class="p">);</span>
      <span class="mf">...</span><span class="n">etc</span><span class="mf">...</span>
<span class="p">}</span>
</code></pre></div></div> <p>Esta es una forma alternativa para el controlador:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$email</span> <span class="o">=</span> <span class="nf">request</span><span class="p">(</span><span class="s2">"email"</span><span class="p">);</span>
    <span class="nv">$asunto</span> <span class="o">=</span> <span class="nf">request</span><span class="p">(</span><span class="s2">"asunto"</span><span class="p">);</span>
    <span class="mf">...</span><span class="n">etc</span><span class="mf">...</span>
<span class="p">}</span>

<span class="c1">### 5.8.10. Validación de formularios con Blade</span>

<span class="nc">Otra</span> <span class="n">cosa</span> <span class="n">que</span> <span class="nc">Blade</span> <span class="n">facilita</span> <span class="n">muchísimo</span> <span class="n">es</span> <span class="n">la</span> <span class="n">validación</span> <span class="n">de</span> <span class="n">formularios</span> <span class="n">en</span> <span class="n">el</span> <span class="n">lado</span> <span class="n">del</span> <span class="n">servidor</span><span class="mf">.</span>

<span class="nc">El</span> <span class="n">formulario</span> <span class="n">en</span> <span class="n">nuestra</span> <span class="n">vista</span> <span class="n">quedaría</span> <span class="nf">así</span> <span class="p">(</span><span class="n">observa</span> <span class="n">cómo</span> <span class="n">mostramos</span> <span class="n">los</span> <span class="n">errores</span> <span class="o">-</span><span class="n">si</span> <span class="n">los</span> <span class="n">hay</span><span class="o">-</span> <span class="n">con</span> <span class="n">un</span> <span class="n">bucle</span><span class="p">)</span><span class="o">:</span>

<span class="sb">``</span><span class="err">`</span><span class="n">html</span>
<span class="o">&lt;</span><span class="n">form</span> <span class="n">method</span><span class="o">=</span><span class="s2">"POST"</span> <span class="n">action</span><span class="o">=</span><span class="s2">"{{ route('mi-ruta') }}"</span><span class="o">&gt;</span>
      <span class="o">@</span><span class="k">if</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="nf">any</span><span class="p">())</span> 
         <span class="o">@</span><span class="k">foreach</span> <span class="p">(</span><span class="nv">$errors</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">()</span> <span class="k">as</span> <span class="nv">$error</span><span class="p">)</span>
             <span class="p">{{</span> <span class="nv">$error</span> <span class="p">}}</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span>
         <span class="o">@</span><span class="k">endforeach</span>
      <span class="o">@</span><span class="k">endif</span>
      <span class="o">&lt;</span><span class="n">input</span> <span class="n">type</span><span class="o">=</span><span class="s2">"email"</span> <span class="n">name</span><span class="o">=</span><span class="s2">"email"</span><span class="o">&gt;&lt;</span><span class="n">br</span><span class="o">&gt;</span>
      <span class="mf">...</span><span class="n">resto</span> <span class="n">del</span> <span class="n">formulario</span> <span class="n">igual</span><span class="mf">...</span> 
   <span class="o">&lt;/</span><span class="n">form</span><span class="o">&gt;</span>
</code></pre></div></div> <p>El objeto $errors (disponible en todas las vistas) tiene muchos más métodos útiles que puedes consultar en la documentación de Laravel.</p> <p>Y el controlador quedaría así. Observa cómo definimos varias reglas de validación para campos del formulario:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">store</span><span class="p">()</span> <span class="p">{</span>
      <span class="n">request</span><span class="o">-&gt;</span><span class="nf">validate</span><span class="p">([</span>
         <span class="s1">'email'</span> <span class="o">=&gt;</span> <span class="s1">'required|email'</span><span class="p">,</span>
         <span class="s1">'asunto'</span> <span class="o">=&gt;</span> <span class="s1">'required'</span>
      <span class="p">]);</span>
      <span class="c1">// A partir de aquí, procesar el formulario igual que antes</span>
</code></pre></div></div> <p>Puedes consultar todas las reglas de validación admitidas en <a href="https://laravel.com/docs/validation">https://laravel.com/docs/validation</a>.</p> <p>Cuando vuelve a cargarse el formulario que contenía un error, suele ser apropiado volver a cargar los datos que el usuario ya había tecleado. A esto se le llama “repopular” el formulario, y con Blade se hace así:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">"POST"</span> <span class="na">action=</span><span class="s">"{{ route('mi-ruta') }}"</span><span class="nt">&gt;</span>
      @if ($errors-&gt;any()) 
         @foreach ($errors-&gt;all() as $error)
              {{ $error }}<span class="nt">&lt;br&gt;</span>
         @endforeach
      @endif
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"email"</span> <span class="na">name=</span><span class="s">"email"</span> <span class="na">value=</span><span class="s">"{{ old('email') }}"</span><span class="nt">&gt;&lt;br&gt;</span>
      ...resto del formulario igual... 
   <span class="nt">&lt;/form&gt;</span>
</code></pre></div></div> <h3 id="5811-añadir-css-y-javascript-a-nuestras-vistas"> <a href="#5811-añadir-css-y-javascript-a-nuestras-vistas" class="anchor-heading" aria-labelledby="5811-añadir-css-y-javascript-a-nuestras-vistas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.11. Añadir CSS y Javascript a nuestras vistas </h3> <p>Laravel ya trae dos archivos (app.css y app.js) basados en Boostrap 4 para empezar a trabajar. Para usarlos, basta con añadir esto a la cabecera de nuestras vistas:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"/css/app.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"js/app.js"</span> <span class="na">defer</span><span class="nt">&gt;&lt;/script&gt;</span>
</code></pre></div></div> <p>Si queremos añadir reglas CSS, NO debemos editar /public/app.css, porque es un CSS compilado y minimizado con SASS. Lo correcto para añadir nuestro CSS a ese archivo es:</p> <ol> <li>Editar /resources/sass/app.css</li> <li>Recompilar este archivo con SASS (o con less o con stylus)</li> </ol> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm run dev (o también: $ yarn dev)
</code></pre></div></div> <p>Y, por supuesto, siempre podemos crear nuestro propio CSS y nuestro JS en /public. En ese caso, los archivos no estarían optimizados (tendríamos que hacerlo a mano, si queremos) y serían accesibles de forma pública. El CSS y el JavaScript que vayamos a usar de este modo se pueden colocar en /public/css y /public/js</p> <h3 id="5812-vistas-de-error-personalizadas"> <a href="#5812-vistas-de-error-personalizadas" class="anchor-heading" aria-labelledby="5812-vistas-de-error-personalizadas"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 5.8.12. Vistas de error personalizadas </h3> <p>Las vistas creadas en /resources/views/errors permiten personalizar fácilmente las pantallas de error HTTP.</p> <p>Por ejemplo, si creas un archivo /resources/views/errors/404.blade.php, esa vista se mostrará cada vez que ocurra un error 404 (página no encontrada)</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
