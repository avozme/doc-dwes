<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>6 Servicios web - DAW DOCS</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>6 Servicios web | DAW DOCS</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="6 Servicios web" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <meta property="og:description" content="Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)" /> <link rel="canonical" href="/servicios-web/" /> <meta property="og:url" content="/servicios-web/" /> <meta property="og:site_name" content="DAW DOCS" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="6 Servicios web" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/servicios-web/","headline":"6 Servicios web","description":"Apuntes del módulo de “Desarrollo web en entorno servidor”, de 2º curso del Ciclo Formativo de Grado Superior de “Desarrollo de Aplicaciones Web”, impartido en el IES Celia Viñas de Almería (España)","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> DAW DOCS </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/" class="nav-list-link">Desarrollo Web en Entorno Servidor</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/cms/" class="nav-list-link">1 Sistemas gestores de contenido (CMS)</a><ul class="nav-list"><li class="nav-list-item "> <a href="/cms/algunas-cosas-que-debes-saber" class="nav-list-link">1.1 Algunas cosas que debes saber sobre los CMS</a> </li><li class="nav-list-item "> <a href="/cms/wordpress" class="nav-list-link">1.2 Wordpress</a> </li><li class="nav-list-item "> <a href="/cms/moodle" class="nav-list-link">1.3 Moodle</a> </li><li class="nav-list-item "> <a href="/cms/prestashop" class="nav-list-link">1.4 Prestashop</a> </li></ul></li><li class="nav-list-item "><a href="/php/" class="nav-list-link">2 Introducción a PHP</a></li><li class="nav-list-item "><a href="/cookies-sesiones-seguridad/" class="nav-list-link">3 Cookies, sesiones y seguridad</a></li><li class="nav-list-item "><a href="/mvc/" class="nav-list-link">4 Arquitectura MVC</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/laravel/" class="nav-list-link">5 Laravel</a><ul class="nav-list"><li class="nav-list-item "> <a href="/laravel/1" class="nav-list-link">5.1 Frameworks PHP MVC</a> </li><li class="nav-list-item "> <a href="/laravel/2" class="nav-list-link">5.2 Características de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/3" class="nav-list-link">5.3 Instalación de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/4" class="nav-list-link">5.4 Arquitectura, convenciones y configuración de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/5" class="nav-list-link">5.5 Artisan</a> </li><li class="nav-list-item "> <a href="/laravel/6" class="nav-list-link">5.6 Primeros pasos con Laravel. Hola mundo</a> </li><li class="nav-list-item "> <a href="/laravel/7" class="nav-list-link">5.7 Enrutamiento</a> </li><li class="nav-list-item "> <a href="/laravel/8" class="nav-list-link">5.8 Vistas y plantillas. Blade</a> </li><li class="nav-list-item "> <a href="/laravel/9" class="nav-list-link">5.9 Controladores</a> </li><li class="nav-list-item "> <a href="/laravel/10" class="nav-list-link">5.10 Migraciones</a> </li><li class="nav-list-item "> <a href="/laravel/11" class="nav-list-link">5.11 Usando la BD con Eloquent</a> </li><li class="nav-list-item "> <a href="/laravel/12" class="nav-list-link">5.12 Usando la BD con QueryBuilder</a> </li><li class="nav-list-item "> <a href="/laravel/13" class="nav-list-link">5.13 Sesiones con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/14" class="nav-list-link">5.14 Helpers de Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/15" class="nav-list-link">5.15 Flujo de trabajo típico con Laravel</a> </li><li class="nav-list-item "> <a href="/laravel/16" class="nav-list-link">5.16 Laravel y Vue.js</a> </li><li class="nav-list-item "> <a href="/laravel/17" class="nav-list-link">5.17 Aspectos avanzados de Laravel</a> </li></ul></li><li class="nav-list-item active"><a href="/servicios-web/" class="nav-list-link active">6 Servicios web</a></li><li class="nav-list-item "><a href="/ajax/" class="nav-list-link">7 Ajax</a></li><li class="nav-list-item "><a href="/otras-tecnologias/" class="nav-list-link">8 Otras tecnologías</a></li><li class="nav-list-item "><a href="/scv-git/" class="nav-list-link">Anexo I. Sistemas de control de versiones. Git</a></li></ul></li><li class="nav-list-item"><a href="/about/" class="nav-list-link">About</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search DAW DOCS" aria-label="Search DAW DOCS" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Desarrollo Web en Entorno Servidor</a></li> <li class="breadcrumb-nav-list-item"><span>6 Servicios web</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="6-servicios-web"> <a href="#6-servicios-web" class="anchor-heading" aria-labelledby="6-servicios-web"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 6. Servicios web </h1> <h2 id="61-qué-es-un-servicio-web"> <a href="#61-qué-es-un-servicio-web" class="anchor-heading" aria-labelledby="61-qué-es-un-servicio-web"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 6.1. ¿Qué es un servicio web? </h2> <p>¿Qué es un servicio web? Es una forma de permitir que las aplicaciones se comuniquen independientemente de la plataforma. Las aplicaciones intercambian mensajes generalmente mediante XML o JSON. Hay dos estándares principales en la industria para implementar servicios web: SOAP y REST.</p> <p>Diferencia entre un servicio web y una aplicación web Un servicio web está pensado para que lo use otra aplicación (el cliente), no un ser humano. Por ese motivo, carece de interfaz de usuario y no produce salidas HTML legibles. Los servicios web suelen producir salidas XML o JSON, pensadas para que los clientes las procesen.</p> <h2 id="62-soap"> <a href="#62-soap" class="anchor-heading" aria-labelledby="62-soap"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 6.2. SOAP </h2> <p>¿Qué es SOAP? SOAP (Single Object Access Protocol) es un mecanismo para la implementación, descripción y publicación de servicios en red. SOAP establece el modo en el que deben comportarse el cliente y el servidor para hablar entre sí, así como la forma en la que el servidor debe dar a conocer sus servicios. Es un mecanismo orientado al proceso, a diferencia de REST, que está orientado a los datos.</p> <p>La pila de protocolos de SOAP</p> <p>XXX imagen</p> <p>Ejemplo de intercambio de mensajes SOAP</p> <p>XXX imagen</p> <p>Ejemplo 1: Consulta de una BD de marcas y modelos de coches. Existirán dos funciones: ObtenerMarcas ObtenerModelos($marca) No usaremos fichero WSDL (descripción del servicio) El cliente debe conocer cómo utilizar el servidor por otras vías más tradicionales: documentación de la API, guía del desarrollador, manual de usuario…</p> <p>Objetos SoapServer y SoapClient: Para crear un servidor: $soapS = new SoapServer(“fichero WSDL”); Para crear un cliente: $soapC = new SoapClient(“fichero WSDL”); Si no tenemos WSDL: $soapS = new SoapServer(null, “URI del servidor”); $soapC = new SoapClient(null, “URI del servidor y del servicio”);</p> <p>El servidor se crea con una clase que contenga los métodos necesarios:</p> <p>class GestionAutomoviles { public function ObtenerMarcas() { …. return $marcas; }</p> <p>public function ObtenerModelos($marca) { …. return $modelos; } }</p> <p>public function ObtenerMarcas() { $db = new mysqli(<datos-de-la-conexión>);</datos-de-la-conexión></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$marcas = array();
if( $db )
{
  $result = $db-&gt;query('select id, marca from marcas');
  while( $row = $result-&gt;fetch_array() )
    $marcas[$row['id']] = $row['marca'];
  $db-&gt;close();
}

return $marcas;   }
</code></pre></div></div> <p>public function ObtenerModelos($marca) { $db = new mysqli(<datos-de-la-conexión>); $marca = intVal($marca); $modelos = array();</datos-de-la-conexión></p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if( $marca !== 0 )
{
  $result = $db-&gt;query('select id, modelo from modelos
                          where marca = ' . $marca );
  while( $row = $result-&gt;fetch_array() )
      $modelos[$row['id']] = $row['modelo'];
}
$db-&gt;close();
return $modelos;   }
</code></pre></div></div> <p>Ahora registramos el servicio usando la clase SoapServer de PHP, y asignándole la clase anterior:</p> <p>&lt;?php include ‘GestionAutomoviles.class.php’; $soap = new SoapServer(null, array(‘uri’ =&gt; ‘http://localhost/’)); $soap-&gt;setClass(‘GestionAutomoviles’); $soap-&gt;handle(); ?&gt;</p> <p>A este archivo lo llamaremos webservice.php</p> <p>Un cliente PHP puede usar ahora el servicio así:</p> <p>&lt;?php $client = new SoapClient(null, array(‘uri’ =&gt; ‘http://localhost/’, ‘location’ =&gt; ‘http://localhost/<ruta>/webservice.php')); $marcas = $client-&gt;ObtenerMarcas(); foreach($marcas as $key =&gt; $value ) echo $value; ?&gt;</ruta></p> <p>Ejemplo 2: Un servicio que devolverá una lista de libros de una biblioteca. Empaquetaremos el id, el título y el ISBN con JSON: Es más ligero que XML Y más sencillo de crear y procesar Tampoco usaremos WSDL (descripción del servicio).</p> <p>Creamos el servidor (archivo libros.class.php):</p> <p>class libros { private function getLibrosJSON() { $sql = “SELECT l.* “;<br /> $sql .= “ FROM libros AS l “; $db = new dbAbstract(); // Suponemos que existe una capa // de abstracción de datos return json_encode($db-&gt;consulta($sql)); }</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> Registramos el servidor (archivo libros.server.php):
</code></pre></div></div> <p>&lt;?php include ‘libros.class.php’; $soap = new SoapServer(null, array(‘uri’ =&gt; ‘http://localhost/’)); $soap-&gt;setClass(‘libros’); $soap-&gt;handle(); ?&gt;</p> <p>Creamos un cliente:</p> <p>&lt;?php $client = new SoapClient(null, array(‘uri’ =&gt; ‘http://localhost/’, ‘location’ =&gt; ‘http://localhost/…/libros.server.php’)); $listaLibros = $libros-&gt;getLibrosJSON(); ?&gt;</p> <p>Ahora el cliente dispone en $listaLibros de información con estructura compleja recibida del servidor (id, titulo, isbn) y empaquetada en formato JSON.</p> <p>Ejemplo 3: Servicio de alculadora El servicio proporcionará dos funciones: sumar (op1, op2) restar (op1, op2) Ahora sí usaremos WSDL para definir el servicio y que los clientes sepan cómo usarlo.</p> <p>Código del sevidor &lt;?php $server = new SoapServer(“aritmetica.wsdl”);</p> <p>function sumar($operando1,$operando2){ return $operando1+$operando2; }</p> <p>function restar($operando1,$operando2){ return $operando1-$operando2; }</p> <p>$server-&gt;AddFunction(“sumar”); $server-&gt;AddFunction(“restar”); $server-&gt;handle(); ?&gt;</p> <p>Código del cliente &lt;?php $clienteSOAP = new SoapClient(‘http://ejemplo.com/test/wsdl/aritmetica.wsdl’);</p> <p>$resultado_suma = $clienteSOAP-&gt;sumar(2.7, 3.5); $resultado_resta = $clienteSOAP-&gt;restar(2.7, 3.5);</p> <p>echo “la suma de 2.7 mas 3.5 es: “ . $resultado_suma . “<br />”; echo “la diferencia de 2.7 menos 3.5 es: “ . $resultado_resta . “<br />”; ?&gt;</p> <p>Documento WSDL: mensajes</p> <message name="AritmeticaPeticion"> <part name="operando1" type="xsd:float" /> <part name="operando2" type="xsd:float" /> </message> <message name="AritmeticaRespuesta"> <part name="respuesta" type="xsd:float" /> </message> <p>Documento WSDL: operaciones</p> <portType name="AritmeticaPort"> <operation name="sumar"> <input message="tns:AritmeticaPeticion" /> <output message="tns:AritmeticaRespuesta" /> </operation> <operation name="restar"> <input message="tns:AritmeticaPeticion" /> <output message="tns:AritmeticaRespuesta" /> </operation> </portType> <p>Documento WSDL: enlaces</p> <binding name="AritmeticaBinding" type="tns:AritmeticaPort"> <soap:binding style="rpc" /> <operation name="sumar"> <soap:operation soapAction="urn:Aritmetica#sumar" /> <input /> <soap:body use="encoded" namespace="urn:Aritmetica" /> &lt;/input&gt; <output> <soap:body use="encoded" namespace="urn:Aritmetica" /> </output> </operation> <operation name="restar"> <soap:operation soapAction="urn:Aritmetica#restar" /> <input /> <soap:body use="encoded" namespace="urn:Aritmetica" /> &lt;/input&gt; <output> <soap:body use="encoded" namespace="urn:Aritmetica" /> </output> </operation> </binding> <p>Documento WSDL: servicio</p> <service name="AritmeticaServicio"> <port name="AritmeticaPort" binding="tns:AritmeticaBinding"> <soap:address location="http://ejemplo.com/test/wsdl/aritmetica_server.php" /> </port> </service> <h3 id="uddi"> <a href="#uddi" class="anchor-heading" aria-labelledby="uddi"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> UDDI </h3> <p>Es un intento de la industria por estandarizar repositorios de servicios, de manera que cualquier cliente pueda descubrirlos y usarlos. Está en un punto muerto desde 2006, cuando Microsoft e IBM decidieron abandonarlo.</p> <h2 id="rest"> <a href="#rest" class="anchor-heading" aria-labelledby="rest"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> REST </h2> <p>¿Qué es REST? REST (Representational State Transfer) es un mecanismo de intercambio de información entre clientes y servidores de una red. A diferencia de SOAP, está orientado a los datos, esto eso, proporciona siempre los mismos tipos de acceso a los recursos, sin posibilidad de definir nuevas operaciones. Por esa razón se dice que REST está orientado a los datos mientras que SOAP está orientado a los procesos.</p> <p>Las 7 operaciones REST Un servidor REST (también llamado RESTful) debe implementar estas siete operaciones de acceso a cada tipo de recurso:</p> <p>XXX lista operaciones</p> <p>REST vs SOAP SOAP es más flexible: permite definir nuevas operaciones sobre los recursos, mientras que REST está limitado a las 7 operaciones predefinidas. REST es mucho más sencillo de usar e implementar: las operaciones son bien conocidas y no es necesario describirlas (WSDL) ni publicarlas de ningún modo. Para la mayor parte de las aplicaciones, REST es más que suficiente, y de ahí su mayor implantación en la actualidad.</p> <p>Cómo implementar un servidor RESTful Para implementar un servidor RESTful, basta con: Crear una arquitectura MVC para los recursos/datos que deseemos servir. Con Laravel, esto se puede conseguir con el comando: $ php artisan make:controller –resource <controlador> En lugar de mostrar los recursos en una vista, los mostraremos mediante JSON con un sencillo echo. (Recuerda que esa salida la recibirá el cliente, no un ser humano)</controlador></p> <p>Es importante respetar los nombres de las peticiones HTTP, así como los verbos (GET, POST, etc), puesto que serán los que el cliente utilice.</p> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
